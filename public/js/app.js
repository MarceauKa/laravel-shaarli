(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+fAT":function(t,e,n){var i={"./components/Background.vue":"iyXs","./components/ChestCard.vue":"MX7w","./components/ChestForm.vue":"0O8z","./components/ChestLines.vue":"0TP3","./components/Confirm.vue":"cNyC","./components/Flash.vue":"tEIc","./components/LinkCard.vue":"kuJz","./components/LinkForm.vue":"ugYh","./components/Loader.vue":"S4HP","./components/ManageTags.vue":"NyNk","./components/Modal.vue":"uuIC","./components/PasswordGenerator.vue":"ZTJQ","./components/PurgeLogins.vue":"jPMG","./components/Search.vue":"JX/T","./components/Sharer.vue":"zV0C","./components/StoryCard.vue":"yDsy","./components/StoryForm.vue":"5lKZ","./components/Tags.vue":"4dkW","./components/TempSharing.vue":"FT2k","./components/UserForm.vue":"bVTN","./components/Users.vue":"FOBs"};function r(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id="+fAT"},0:function(t,e,n){n("bUC5"),t.exports=n("pyCd")},"0O8z":function(t,e,n){"use strict";n.r(e);var i=n("1IHE"),r=n("0fPN"),s={mixins:[r.a,i.a],props:{chest:{type:Object,required:!1,default:function(){}}},data:function(){return{form:{title:"",content:[],is_pinned:!1,tags:[]},loading:!1}},mounted:function(){this.chest&&(this.form=this.chest)},methods:{submit:function(){var t=this;this.loading=!0,axios.request({method:this.chest?"PUT":"POST",url:this.chest?this.chest.url_update:"/api/chest",data:this.form}).then(function(e){t.chest?(t.$toasted.success(t.__("Chest updated"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.loading=!1):(t.$toasted.success(t.__("Chest created"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.reset())}).catch(function(e){t.loading=!1,t.setFormError(e),t.setHttpError(e),t.toastHttpError(t.__("Unable to save chest"))})},reset:function(){this.loading=!1,this.form={title:"",content:[],is_pinned:!1,tags:[]},this.resetFormError()}}},o=n("KHd+"),a=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--chest"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v(t._s(t.__("Title")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("title")},attrs:{type:"text",id:"title",disabled:t.loading},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),t.hasFormError("title")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("title")))]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.__("Content")))]),t._v(" "),n("chest-lines",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_pinned,expression:"form.is_pinned"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"is_pinned",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_pinned)?t._i(t.form.is_pinned,null)>-1:t.form.is_pinned},on:{change:function(e){var n=t.form.is_pinned,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_pinned",n.concat([null])):s>-1&&t.$set(t.form,"is_pinned",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_pinned",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_pinned",dusk:"chest-form-pinned"}},[t._v(t._s(t.__("Is pinned?")))])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.__("Tags")))]),t._v(" "),n("tags",{model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)]),t._v(" "),n("div",{staticClass:"card-footer"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t.loading?n("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n            "+t._s(t.__("Save"))+"\n        ")]),t._v(" "),t.chest?n("a",{staticClass:"btn btn-outline-primary",attrs:{href:t.chest.permalink}},[t._v(t._s(t.__("View")))]):t._e()])])},[],!1,null,null,null);e.default=a.exports},"0TP3":function(t,e,n){"use strict";n.r(e);var i=n("9B9B"),r={mixins:[n.n(i).a],props:{preview:{type:null|Object,required:!1,default:null}},data:function(){return{lines:[],types:{url:this.__("URL"),text:this.__("Text"),password:this.__("Secret"),code:this.__("Code")},line:{type:"text",name:"",value:""},drag:!1,dragOptions:{animation:200,group:"lines",disabled:!1,ghostClass:"ghost",forceFallback:!0}}},methods:{addLine:function(t){var e=this;this.line.type=t,this.lines.push(this.line),this.line={type:"text",name:"",value:""},this.$nextTick(function(){var t=e.$refs.form.querySelectorAll('.row-line input[name="value"]');t[t.length-1].focus()})},deleteLine:function(t){this.lines.splice(this.lines.indexOf(t),1)},toggleShowPassword:function(t,e){var n=t.target.parentNode.parentNode.firstChild;n.type="password"===n.type?"text":"password",t.target.innerHTML="password"===n.type?this.__("Show"):this.__("Hide")},setPassword:function(t,e){e.value=t}},watch:{"$attrs.value":function(t){this.lines=t},lines:function(t){this.$emit("input",t)}}},s=n("KHd+"),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chest-lines"},[t.preview?n("section",{ref:"preview",staticClass:"my-3"},t._l(t.preview,function(e,i){return n("div",{staticClass:"row mb-3"},[n("div",{staticClass:"col-12"},[n("strong",[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"col-12"},["url"===e.type?n("a",{attrs:{href:e.value,target:"_blank"}},[t._v(t._s(e.value))]):"password"===e.type?n("div",{staticClass:"input-group input-group-sm"},[n("input",{staticClass:"form-control",attrs:{type:"password",autocomplete:"off",readonly:""},domProps:{value:e.value}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.toggleShowPassword(e,i)}}},[t._v(t._s(t.__("Show")))]),t._v(" "),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(n){return t.copyToClipboard(n,e.value)}}},[t._v(t._s(t.__("Copy")))])])]):"code"===e.type?n("pre",{staticClass:"border p-2"},[n("code",[t._v(t._s(e.value))])]):n("span",[t._v(t._s(e.value))])])])}),0):n("section",{ref:"form"},[n("draggable",t._b({attrs:{group:"lines",handle:".handle-order"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.lines,callback:function(e){t.lines=e},expression:"lines"}},"draggable",t.dragOptions,!1),[n("transition-group",{attrs:{type:"transition",tag:"div",name:t.drag?null:"flip-list"}},t._l(t.lines,function(e,i){return n("div",{key:"item-"+i,staticClass:"form-group"},[n("div",{staticClass:"row row-line"},[n("div",{staticClass:"col-12 col-md-4"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.types[e.type]))]),t._v(" "),n("div",{staticClass:"dropdown-menu"},t._l(t.types,function(i,r){return n("a",{staticClass:"dropdown-item",class:{active:r===e.type},on:{click:function(t){t.preventDefault(),e.type=r}}},[t._v(t._s(i))])}),0)]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:t.__("Name")},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-12 col-md-8"},[n("div",{staticClass:"input-group"},["code"===e.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{rows:"5",name:"value"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text",name:"value",autocomplete:"off"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-append"},["password"===e.type?n("password-generator",{attrs:{original:e.value},on:{generated:function(n){return t.setPassword(n,e)}}}):t._e(),t._v(" "),n("confirm",{staticClass:"btn btn-outline-secondary",attrs:{tag:"button",text:"<i class='fas fa-trash-alt'></i>","text-confirm":"<i class='fas fa-check'></i>"},on:{confirmed:function(n){return t.deleteLine(e)}}}),t._v(" "),n("button",{staticClass:"btn btn-outline-secondary handle-order",attrs:{type:"button"}},[n("i",{staticClass:"fas fa-arrows-alt"})])],1)])])])])}),0)],1),t._v(" "),n("div",{staticClass:"form-group text-right"},t._l(t.types,function(e,i){return n("button",{staticClass:"btn btn-outline-secondary mr-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.addLine(i)}}},[t._v(t._s(t.__("Add"))+" "+t._s(e))])}),0)],1)])},[],!1,null,null,null);e.default=o.exports},"0fPN":function(t,e,n){"use strict";e.a={data:function(){return{formErrors:{}}},methods:{setFormError:function(t){this.formErrors=t.response.data.errors},hasFormError:function(t){return this.formErrors.hasOwnProperty(t)},firstFormError:function(t){return this.hasFormError(t)?this.formErrors[t][0]:null},resetFormError:function(){this.formErrors={}}}}},"1IHE":function(t,e,n){"use strict";var i={data:function(){return{httpError:{}}},methods:{setHttpError:function(t){this.httpError=t.response.data.message||null},hasHttpError:function(t){return this.httpError},getHttpError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.hasHttpError()?this.httpError:t},toastHttpError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.getHttpError(t);this.$toasted.error(e)}}};e.a=i},"1dGX":function(t,e,n){"use strict";e.Any=n("y8fO"),e.Cc=n("p7ys"),e.Cf=n("b9EY"),e.P=n("fKCf"),e.Z=n("T8I8")},"4dkW":function(t,e,n){"use strict";n.r(e);var i={data:function(){return{options:[],loading:!1}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.loading=!0,axios.get("/api/tags").then(function(e){t.loading=!1,t.options=e.data}).catch(function(e){t.loading=!1,t.$toasted.error(t.__("Can't fetch tags")),console.log(e)})},select:function(t){this.$attrs.value.push(t),this.$emit("input",this.$attrs.value)},deselect:function(t){this.$attrs.value.splice(this.$attrs.value.indexOf(t),1),this.$emit("input",this.$attrs.value)},create:function(t){this.options.push(t),this.$attrs.value.push(t)}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{value:t.$attrs.value,"tag-placeholder":t.__("Create tag"),selectLabel:t.__("Click to select"),deselectLabel:t.__("Click to select"),noOptions:t.__("No tag"),placeholder:t.__("Search or type a tag"),"open-direction":"bottom",options:t.options,multiple:!0,taggable:!0,loading:t.loading,closeOnSelect:!1},on:{tag:t.create,select:t.select,remove:t.deselect}})},[],!1,null,null,null);e.default=s.exports},"5lKZ":function(t,e,n){"use strict";n.r(e);var i=n("0fPN"),r=n("1IHE"),s={mixins:[i.a,r.a],props:{story:{type:Object,required:!1,default:function(){}}},data:function(){return{form:{title:"",slug:"",content:"",is_private:!1,is_pinned:!1,tags:[]},loading:!1,editor:{minHeight:"300px",language:"fr_FR",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!0,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]}}},mounted:function(){this.story&&(this.form=this.story)},methods:{submit:function(){var t=this;this.loading=!0,axios.request({method:this.story?"PUT":"POST",url:this.story?this.story.url_update:"/api/story",data:this.form}).then(function(e){t.story?(t.$toasted.success(t.__("Story updated"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.loading=!1):(t.$toasted.success(t.__("Story created"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.reset())}).catch(function(e){t.loading=!1,t.setFormError(e),t.setHttpError(e),t.toastHttpError(t.__("Unable to save story"))})},reset:function(){this.loading=!1,this.form={title:"",slug:"",content:"",is_private:!1,is_pinned:!1,tags:[]},this.resetFormError()}},computed:{fullUrl:function(){return"".concat(window.location.origin,"/").concat(this.form.slug)}},watch:{"form.title":function(t){this.form.slug=t.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}}},o=n("KHd+"),a=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--story"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v(t._s(t.__("Title")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("title")},attrs:{type:"text",id:"title",disabled:t.loading},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),t.hasFormError("title")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("title")))]):t._e(),t._v(" "),n("p",{staticClass:"text-muted"},[n("small",[t._v(t._s(t.fullUrl))])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"content"}},[t._v(t._s(t.__("Content")))]),t._v(" "),n("editor",{attrs:{id:"content",previewStyle:"vertical",options:t.editor},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_private,expression:"form.is_private"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"is_private",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_private)?t._i(t.form.is_private,null)>-1:t.form.is_private},on:{change:function(e){var n=t.form.is_private,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_private",n.concat([null])):s>-1&&t.$set(t.form,"is_private",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_private",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_private",dusk:"story-form-private"}},[t._v(t._s(t.__("Private story?")))])])])]),t._v(" "),n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_pinned,expression:"form.is_pinned"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"is_pinned",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_pinned)?t._i(t.form.is_pinned,null)>-1:t.form.is_pinned},on:{change:function(e){var n=t.form.is_pinned,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_pinned",n.concat([null])):s>-1&&t.$set(t.form,"is_pinned",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_pinned",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_pinned",dusk:"story-form-pinned"}},[t._v(t._s(t.__("Is pinned?")))])])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.__("Tags")))]),t._v(" "),n("tags",{model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)]),t._v(" "),n("div",{staticClass:"card-footer"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t.loading?n("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n            "+t._s(t.__("Save"))+"\n        ")]),t._v(" "),t.story?n("a",{staticClass:"btn btn-outline-primary",attrs:{href:t.story.url}},[t._v(t._s(t.__("View")))]):t._e()])])},[],!1,null,null,null);e.default=a.exports},"8oxB":function(t,e){var n,i,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var l,c=[],d=!1,u=-1;function f(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&h())}function h(){if(!d){var t=a(f);d=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||d||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"9B9B":function(t,e){t.exports={methods:{copyToClipboard:function(t,e){var n=t.target.innerHTML;t.target.innerHTML=this.__("Copied");setTimeout(function(){t.target.innerHTML=n},1e3);var i=document.createElement("textarea"),r=i.contentEditable,s=i.readOnly;i.value=e,i.contentEditable=!0,i.readOnly=!1,i.setAttribute("readonly",!1),i.setAttribute("contenteditable",!0),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);var o=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);i.select(),i.setSelectionRange(0,999999),document.execCommand("copy"),document.body.removeChild(i),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o)),i.contentEditable=r,i.readOnly=s}}}},BEtg:function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},FOBs:function(t,e,n){"use strict";n.r(e);var i={data:function(){return{users:[],loading:!1,creating:!1,editing:!1}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.loading=!0,axios.get("/api/manage/users").then(function(e){t.loading=!1,t.users=e.data.data}).catch(function(e){t.loading=!1,t.$toasted.error(t.__("Unable to load users"))})},remove:function(t){var e=this;this.loading=!0,axios.delete("/api/manage/users/".concat(t.id)).then(function(n){e.$toasted.success(e.__("User :name has been deleted",{name:t.name})),e.fetch()}).catch(function(t){"error"===t.response.data.status?e.$toasted.error(t.response.data.message):e.$toasted.error(e.__("Unable to delete user")),e.loading=!1})},add:function(){this.creating=!0,this.editing=!1},edit:function(t){this.creating=!1,this.editing=t},formSubmited:function(){this.creating=!1,this.editing=!1,this.fetch()}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[t._v("\n        "+t._s(t.__("Users"))+"\n        "),n("button",{staticClass:"btn btn-primary btn-sm text-white",on:{click:function(e){return t.add()}}},[t._v(t._s(t.__("Add user")))])]),t._v(" "),n("div",{staticClass:"card-body"},[n("loader",{attrs:{loading:t.loading}}),t._v(" "),t.loading?t._e():n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-borderless table-sm"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.__("Name")))]),t._v(" "),n("th",[t._v(t._s(t.__("E-Mail Address")))]),t._v(" "),n("th",[t._v(t._s(t.__("Is admin?")))]),t._v(" "),n("th",[t._v("#")])])]),t._v(" "),n("tbody",t._l(t.users,function(e){return n("tr",[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.email))]),t._v(" "),n("td",[t._v(t._s(e.is_admin?t.__("Yes"):t.__("No")))]),t._v(" "),n("td",[n("button",{staticClass:"btn btn-info btn-sm text-white",on:{click:function(n){return t.edit(e)}}},[t._v(t._s(t.__("Edit")))]),t._v(" "),n("confirm",{staticClass:"btn btn-danger btn-sm text-white",attrs:{text:t.__("Delete"),"text-confirm":t.__("Confirm")},on:{confirmed:function(n){return t.remove(e)}}})],1)])}),0)])])],1),t._v(" "),t.creating||t.editing?n("div",{staticClass:"card-footer"},[n("user-form",{attrs:{user:t.editing},on:{submited:function(e){return t.formSubmited()}}})],1):t._e()])},[],!1,null,null,null);e.default=s.exports},FT2k:function(t,e,n){"use strict";n.r(e);var i=n("1IHE"),r=n("9B9B"),s={mixins:[n.n(r).a,i.a],data:function(){return{loading:!1,open:!1,post:null,shares:[],form:{expiration:"hour"},expirations:[{key:"hour",name:"1 hour"},{key:"hours",name:"12 hours"},{key:"day",name:"1 day"},{key:"days",name:"3 days"},{key:"week",name:"1 week"},{key:"weeks",name:"2 weeks"},{key:"month",name:"1 month"}]}},mounted:function(){var t=this;this.$bus.$on("share",function(e){t.post=e,t.open=!0,t.get()})},methods:{get:function(){var t=this;axios.get(this.post.url_share).then(function(e){t.shares=e.data.shares}).catch(function(e){t.setHttpError(e),t.toastHttpError(t.__("Can't fetch shares"))})},generate:function(){var t=this;this.loading=!0,axios.post(this.post.url_share,{expiration:this.form.expiration}).then(function(e){t.loading=!1,t.shares.unshift(e.data.share),t.$toasted.success(t.__("Link generated"))}).catch(function(e){t.loading=!1,t.setHttpError(e),t.toastHttpError(t.__("Unable to create link for this content"))})}},watch:{open:function(t){!1===t&&(this.post=null,this.shares=[])}}},o=n("KHd+"),a=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{open:t.open,size:"lg"},on:{closed:function(e){t.open=!1}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.__("Temp sharing of :title",{title:t.post.title})))]},proxy:!0},{key:"content",fn:function(){return[n("h4",[t._v(t._s(t.__("Create link")))]),t._v(" "),n("p",[t._v(t._s(t.__("Content will be accessible even private until expiration.")))]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"expiration"}},[t._v(t._s(t.__("Link expires in")))]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.expiration,expression:"form.expiration"}],staticClass:"form-control custom-select",attrs:{name:"expiration",id:"expiration"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"expiration",e.target.multiple?n:n[0])}}},t._l(t.expirations,function(e){return n("option",{domProps:{value:e.key}},[t._v(t._s(t.__(e.name)))])}),0)]),t._v(" "),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:t.loading},on:{click:t.generate}},[t.loading?n("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n                "+t._s(t.__("Generate"))+"\n            ")])]),t._v(" "),n("h4",[t._v(t._s(t.__("Active links")))]),t._v(" "),t.shares.length>0?n("table",{staticClass:"table table-borderless table-sm"},[n("thead",[n("tr",[n("th",{staticClass:"w-75"},[t._v(t._s(t.__("URL")))]),t._v(" "),n("th",{staticClass:"w-25"},[t._v(t._s(t.__("Expiration")))])])]),t._v(" "),n("tbody",t._l(t.shares,function(e){return n("tr",[n("td",[n("div",{staticClass:"input-group input-group-sm"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.url}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(n){return t.copyToClipboard(n,e.url)}}},[t._v(t._s(t.__("Copy")))])])])]),t._v(" "),n("td",[t._v(t._s(e.expires_at))])])}),0)]):n("div",{staticClass:"alert alert-info"},[t._v(t._s(t.__("This content is not actually shared")))])]},proxy:!0}])})},[],!1,null,null,null);e.default=a.exports},GYWy:function(t,e,n){(function(t,i){var r;!function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof i&&i;o.global!==o&&o.window!==o&&o.self;var a,l=2147483647,c=36,d=1,u=26,f=38,h=700,p=72,m=128,_="-",v=/^xn--/,g=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-d,w=Math.floor,k=String.fromCharCode;function E(t){throw new RangeError(y[t])}function x(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function S(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+x((t=t.replace(C,".")).split("."),e).join(".")}function N(t){for(var e,n,i=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function D(t){return x(t,function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function F(t,e,n){var i=0;for(t=n?w(t/h):t>>1,t+=w(t/e);t>b*u>>1;i+=c)t=w(t/b);return w(i+(b+1)*t/(t+f))}function A(t){var e,n,i,r,s,o,a,f,h,v,g,C=[],y=t.length,b=0,k=m,x=p;for((n=t.lastIndexOf(_))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&E("not-basic"),C.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(s=b,o=1,a=c;r>=y&&E("invalid-input"),((f=(g=t.charCodeAt(r++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||f>w((l-b)/o))&&E("overflow"),b+=f*o,!(f<(h=a<=x?d:a>=x+u?u:a-x));a+=c)o>w(l/(v=c-h))&&E("overflow"),o*=v;x=F(b-s,e=C.length+1,0==s),w(b/e)>l-k&&E("overflow"),k+=w(b/e),b%=e,C.splice(b++,0,k)}return D(C)}function O(t){var e,n,i,r,s,o,a,f,h,v,g,C,y,b,x,S=[];for(C=(t=N(t)).length,e=m,n=0,s=p,o=0;o<C;++o)(g=t[o])<128&&S.push(k(g));for(i=r=S.length,r&&S.push(_);i<C;){for(a=l,o=0;o<C;++o)(g=t[o])>=e&&g<a&&(a=g);for(a-e>w((l-n)/(y=i+1))&&E("overflow"),n+=(a-e)*y,e=a,o=0;o<C;++o)if((g=t[o])<e&&++n>l&&E("overflow"),g==e){for(f=n,h=c;!(f<(v=h<=s?d:h>=s+u?u:h-s));h+=c)x=f-v,b=c-v,S.push(k(T(v+x%b,0))),f=w(x/b);S.push(k(T(f,0))),s=F(n,y,i==r),n=0,++i}++n,++e}return S.join("")}a={version:"1.4.1",ucs2:{decode:N,encode:D},decode:A,encode:O,toASCII:function(t){return S(t,function(t){return g.test(t)?"xn--"+O(t):t})},toUnicode:function(t){return S(t,function(t){return v.test(t)?A(t.slice(4).toLowerCase()):t})}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n("YuTi")(t),n("yLpj"))},"JX/T":function(t,e,n){"use strict";n.r(e);var i={props:{url:{type:String,required:!0}},data:function(){return{query:null,results:{},loading:!1,selected:null}},mounted:function(){var t=this;document.addEventListener("keydown",function(e){-1!==["/"].indexOf(e.key)&&function(t){return"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName}(e)&&(e.preventDefault(),e.stopPropagation(),t.$refs.input.focus())})},methods:{search:function(){var t=this;this.loading=!0,axios.post(this.url,{query:this.query}).then(function(e){t.loading=!1,200===e.status&&(t.results=e.data,t.selected=null)}).catch(function(e){t.loading=!1,console.log(e)})},hide:function(){this.query=null,this.results={},this.selected=null},redirect:function(){this.selected&&(window.location=this.selected.url)},move:function(t){if(!1!==this.hasResults){var e=this.results.posts,n=this.selected?e.indexOf(this.selected):null,i=e.length-1;"down"===t&&(this.selected=null===n||n===i?e[0]:e[n+1]),"up"===t&&(this.selected=null===n||0===n?e[i]:e[n-1])}else this.selected=null}},computed:{hasResults:function(){return this.hasTagsResults||this.hasPostsResults},hasTagsResults:function(){return this.results.hasOwnProperty("tags")&&this.results.tags.length>0},hasPostsResults:function(){return this.results.hasOwnProperty("posts")&&this.results.posts.length>0}},watch:{query:_.debounce(function(t){t&&t.length>=3&&this.search(t)},200)}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"form-inline position-relative mb-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"form-control w-100",attrs:{type:"search",placeholder:t.__("Type / to search")},domProps:{value:t.query},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.stopPropagation(),t.move("down"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.stopPropagation(),t.move("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),t.redirect(e))}],input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),n("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.hide,expression:"hide"}],staticClass:"list-group results mt-1",class:{active:t.hasResults}},[t.hasTagsResults?n("div",{staticClass:"list-group-item"},[n("div",[n("i",{staticClass:"fas fa-tags"}),t._v(" "+t._s(t.__("Tags")))]),t._v(" "),n("div",t._l(t.results.tags,function(e){return t.hasTagsResults?n("a",{staticClass:"btn btn-primary btn-sm mr-1",attrs:{href:e.url}},[t._v("\n                    "+t._s(e.name)+"\n                ")]):t._e()}),0)]):t._e(),t._v(" "),t._l(t.results.posts,function(e,i){return t.hasPostsResults?n("a",{staticClass:"list-group-item list-group-item-action",class:{active:t.selected===e},attrs:{href:e.url}},[n("div",[n("span",[t._v(t._s(e.type)+" —")]),t._v(" "),n("strong",[t._v(t._s(e.title))])]),t._v(" "),e.tags.length>0?n("div",t._l(e.tags,function(e){return n("span",{staticClass:"badge badge-secondary mr-1"},[t._v(t._s(e))])}),0):t._e()]):t._e()})],2)])},[],!1,null,null,null);e.default=s.exports},"KHd+":function(t,e,n){"use strict";function i(t,e,n,i,r,s,o,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},MX7w:function(t,e,n){"use strict";n.r(e);var i={props:{single:{type:Boolean,required:!1,default:!1},chest:{type:Object,required:!0,default:function(){}}},data:function(){return{edit:!1}},methods:{remove:function(){var t=this;axios.delete(this.chest.url_delete).then(function(e){t.$toasted.success(t.__("Chest :name has been deleted",{name:t.chest.title})),t.single?window.location="/":window.location.reload()}).catch(function(e){t.$toasted.error(t.__("Unable to delete chest"))})}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--chest mb-4",class:{"card-single":t.single,"card-index":!t.single}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t.chest.is_pinned&&!t.single?n("i",{staticClass:"fas fa-thumbtack fa-sm pr-1"}):t._e(),t._v(" "),n("span",[t._v(t._s(t.__("Chest")))]),t._v(" — "),n("a",{attrs:{href:t.chest.permalink}},[t._v(t._s(t.chest.title))])]),t._v(" "),n("div",{staticClass:"card-content"},[n("chest-lines",{attrs:{preview:t.chest.content}})],1),t._v(" "),t.chest.tags.length>0?n("p",{staticClass:"card-text mt-1"},t._l(t.chest.tags,function(e){return n("a",{staticClass:"badge badge-secondary mr-1",attrs:{href:"/tag/"+e}},[t._v(t._s(e))])}),0):t._e()]),t._v(" "),n("div",{staticClass:"card-footer d-flex justify-content-between"},[n("span",[t.chest.is_private?n("i",{staticClass:"fas fa-lock pr-2"}):t._e(),t._v(t._s(t.chest.date_formated))]),t._v(" "),n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-outline-dark btn-sm dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                "+t._s(t.__("More"))+"\n            ")]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",attrs:{href:t.chest.permalink}},[n("i",{staticClass:"fas fa-link fa-fw mr-1"}),t._v(" "+t._s(t.__("Permalink")))]),t._v(" "),t.chest.editable?n("h6",{staticClass:"dropdown-header"},[t._v(t._s(t.__("Manage")))]):t._e(),t._v(" "),t.chest.editable?n("a",{staticClass:"dropdown-item",on:{click:function(e){return t.$bus.$emit("share",t.chest)}}},[n("i",{staticClass:"fas fa-share-square fa-fw mr-1"}),t._v(" "+t._s(t.__("Temp sharing")))]):t._e(),t._v(" "),t.chest.editable?n("a",{staticClass:"dropdown-item",attrs:{href:t.chest.url_edit}},[n("i",{staticClass:"fas fa-pen-alt fa-fw mr-1"}),t._v(" "+t._s(t.__("Edit")))]):t._e(),t._v(" "),t.chest.editable?n("confirm",{staticClass:"dropdown-item",attrs:{text:"<i class='fas fa-trash-alt fa-fw mr-1'></i> "+t.__("Delete"),"text-confirm":"<i class='fas fa-check fa-fw mr-1'></i> "+t.__("Confirm")},on:{confirmed:t.remove}}):t._e()],1)])])])},[],!1,null,null,null);e.default=s.exports},NyNk:function(t,e,n){"use strict";n.r(e);var i={mixins:[n("1IHE").a],data:function(){return{tags:[],loading:!0}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.loading=!0,axios.get("/api/manage/tags").then(function(e){t.tags=e.data,t.loading=!1}).catch(function(e){t.setHttpError(e),t.toastHttpError(t.__("Can't fetch tags"))})},move:function(t,e){var n=this;"none"!==e&&confirm(this.__("All elements tagged :from will be moved to :to. Selected tag will be deleted. Are you sure?",{from:t,to:e}))&&(this.loading=!0,axios.post("/api/manage/tags/".concat(t,"/move/").concat(e)).then(function(i){n.$toasted.success(n.__("Elements tagged :from have been moved to :to.",{from:t,to:e})),n.fetch()}).catch(function(t){console.log(t)}))},remove:function(t){var e=this;this.loading=!0,axios.delete("/api/manage/tags/".concat(t.name)).then(function(n){e.$toasted.success(e.__("Tag :name has been deleted",{name:t.name})),e.fetch()}).catch(function(t){console.log(t)})}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[t._v(t._s(t.__("Tags")))]),t._v(" "),t.loading?n("div",{staticClass:"card-body"},[n("loader",{attrs:{loading:t.loading}})],1):n("div",{staticClass:"card-body"},[0===t.tags.length?n("div",{staticClass:"alert alert-info"},[t._v("\n            "+t._s(t.__("No tag"))+"\n        ")]):n("table",{staticClass:"table table-borderless table-sm"},[n("thead",[n("tr",[n("th",{staticClass:"w-25"},[t._v(t._s(t.__("Name")))]),t._v(" "),n("th",{staticClass:"w-25"},[t._v(t._s(t.__("Posts")))]),t._v(" "),n("th",{staticClass:"w-50"},[t._v(t._s(t.__("Actions")))])])]),t._v(" "),n("tbody",t._l(t.tags,function(e){return n("tr",[n("td",{staticClass:"align-middle"},[n("a",{attrs:{href:e.url}},[t._v(t._s(e.name))])]),t._v(" "),n("td",{staticClass:"align-middle"},[t._v(t._s(e.posts_count))]),t._v(" "),n("td",{staticClass:"d-flex justify-content-between"},[n("select",{staticClass:"form-control mr-1 w-auto flex-grow-1",attrs:{name:"tag",id:"tag"},on:{change:function(n){return t.move(e.name,n.target.value)}}},[n("option",{attrs:{value:"none"}},[t._v("-- "+t._s(t.__("Move"))+" --")]),t._v(" "),t._l(t.tags,function(i){return e.name!==i.name?n("option",{domProps:{value:i.name,textContent:t._s(i.name)}}):t._e()})],2),t._v(" "),n("confirm",{staticClass:"btn btn-danger btn-sm",attrs:{tag:"button",text:t.__("Delete"),"text-confirm":t.__("Confirm")},on:{confirmed:function(n){return t.remove(e)}}})],1)])}),0)])])])},[],!1,null,null,null);e.default=s.exports},S4HP:function(t,e,n){"use strict";n.r(e);var i={props:{loading:{type:Boolean,required:!1,default:!1}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"d-flex align-content-center align-items-center"},[e("div",{staticClass:"spinner-grow mr-2",attrs:{role:"status"}}),this._v(" "),e("div",[this._v(this._s(this.__("Loading")))])]):this._e()},[],!1,null,null,null);e.default=s.exports},T8I8:function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},URgk:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new s(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("YBdB"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},XHP3:function(t,e){t.exports={methods:{__:function(t,e){var n=window.i18n[t]?window.i18n[t]:t;return _.forEach(e,function(t,e){n=n.replace(":"+e,t)}),n}}}},YBdB:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,s,o,a,l=1,c={},d=!1,u=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){s.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,i=function(t){var e=u.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(o+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[l]=r,i(l),l++},f.clearImmediate=h}function h(t){delete c[t]}function p(t){if(d)setTimeout(p,0,t);else{var e=c[t];if(e){d=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{h(t),d=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("yLpj"),n("8oxB"))},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},ZTJQ:function(t,e,n){"use strict";n.r(e);var i={props:{original:{type:String,required:!1,default:""}},methods:{generate:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.alphabet(e),i=n.length,r="";r.length<t;){var s=Math.floor(Math.random()*i);r+=n[s]}this.$emit("generated",r)},alphabet:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","1234567890","~!?@#$%&^_*+-=[]€,;:|()[]{}"].slice(0,t?4:3).join("")}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-group",attrs:{role:"group"}},[t._m(0),t._v(" "),n("div",{staticClass:"dropdown-menu"},[n("h6",{staticClass:"dropdown-header"},[t._v(t._s(t.__("Alpha numeric with symbols")))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(8)}}},[t._v(t._s(t.__(":size chars",{size:8})))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(16)}}},[t._v(t._s(t.__(":size chars",{size:16})))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(24)}}},[t._v(t._s(t.__(":size chars",{size:24})))]),t._v(" "),n("h6",{staticClass:"dropdown-header"},[t._v(t._s(t.__("Alpha numeric only")))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(8,!1)}}},[t._v(t._s(t.__(":size chars",{size:8})))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(16,!1)}}},[t._v(t._s(t.__(":size chars",{size:16})))]),t._v(" "),n("button",{staticClass:"dropdown-item",on:{click:function(e){return t.generate(24,!1)}}},[t._v(t._s(t.__(":size chars",{size:24})))])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-outline-secondary border-right-0 dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-dice pr-1"})])}],!1,null,null,null);e.default=s.exports},b9EY:function(t,e){t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},bUC5:function(t,e,n){"use strict";n.r(e);var i=n("XHP3"),r=n.n(i);function s(t){var e=new t;Object.defineProperties(e,{on:{get:function(){return this.$on.bind(this)}},once:{get:function(){return this.$once.bind(this)}},off:{get:function(){return this.$off.bind(this)}},emit:{get:function(){return this.$emit.bind(this)}}}),Object.defineProperty(t,"bus",{get:function(){return e}}),Object.defineProperty(t.prototype,"$bus",{get:function(){return e}})}"undefined"!=typeof window&&window.Vue&&window.Vue.use(s);var o=s,a=n("pl0M"),l=n.n(a),c=n("jl8+"),d=n.n(c),u=n("VH6O"),f=n.n(u),h=["load","change","stateChange","focus","blur"],p=["insertText","setValue","setMarkdown","setHtml","reset"],m={name:"TuiEditor",props:{previewStyle:{type:String},height:{type:String},value:{type:String},mode:{type:String},options:{type:Object},html:{type:String},visible:{type:Boolean,default:!0}},data:()=>({editor:null}),computed:{editorOptions(){const t=Object.assign({},this.options);return t.initialValue=this.value,t.initialEditType=this.mode,t.height=this.height,t.previewStyle=this.previewStyle,t}},watch:{previewStyle(t){this.editor.changePreviewStyle(t)},value(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},height(t){this.editor.height(t)},mode(t){this.editor.changeMode(t)},html(t){this.editor.setHtml(t),this.$emit("input",this.editor.getValue())},visible(t){t?this.editor.show():this.editor.hide()}},mounted(){const t={};h.forEach(e=>{t[e]=(...t)=>{this.$emit(e,...t)}});const e=Object.assign(this.editorOptions,{el:this.$refs.tuiEditor,events:t});this.editor=new f.a(e),this.$listeners.input&&this.editor.on("change",()=>{this.$emit("input",this.editor.getValue())})},destroyed(){h.forEach(t=>{this.editor.off(t)}),this.editor.remove()},methods:{invoke(t,...e){let n=null;return this.editor[t]&&(n=this.editor[t](...e),p.indexOf(t)>-1&&this.$emit("input",this.editor.getValue())),n}}},_=n("KHd+"),v=Object(_.a)(m,function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"tuiEditor"})},[],!1,null,null,null).exports,g={name:"TuiEditorViewer",props:{height:{type:String},value:{type:String},exts:{type:Array}},data:()=>({editor:null}),watch:{value(t,e){t!==e&&this.editor.setValue(t)}},mounted(){const t={};h.forEach(e=>{t[e]=(...t)=>{this.$emit(e,...t)}}),this.editor=f.a.factory({el:this.$refs.tuiEditorViewer,exts:this.exts,events:t,initialValue:this.value,height:this.height,viewer:!0})},destroyed(){h.forEach(t=>{this.editor.off(t)}),this.editor.remove()},methods:{invoke(t,...e){let n=null;return this.editor[t]&&(n=this.editor[t](...e)),n}}},C=Object(_.a)(g,function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"tuiEditorViewer"})},[],!1,null,null,null).exports,y=n("x9sl"),b=n("MQ60"),w=n.n(b);window._=n("LvDl");try{window.Popper=n("8L3F").default,window.$=window.jQuery=n("EVdn"),n("SYky")}catch(t){}window.axios=n("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var k=document.head.querySelector('meta[name="csrf-token"]');k?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=k.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");var E=document.head.querySelector('meta[name="api-token"]');E&&(window.axios.defaults.headers.common.Authorization="Bearer "+E.content),window.Vue=n("XuX8"),Vue.mixin(r.a),Vue.use(o),Vue.use(l.a,{position:"top-center",duration:5e3}),Vue.component("multiselect",d.a),Vue.component("editor",v),Vue.component("viewer",C),Vue.directive("on-clickaway",y.directive),Vue.component("draggable",w.a);var x=n("+fAT");x.keys().map(function(t){return Vue.component(t.split("/").pop().split(".")[0],x(t).default)});new Vue({el:"#app"})},bVTN:function(t,e,n){"use strict";n.r(e);var i=n("0fPN"),r={mixins:[i.a],props:{user:{type:Object|Boolean,required:!1,default:!1}},data:function(){return{form:{name:"",email:"",is_admin:!1,password:"",password_confirmation:""},loading:!1}},mounted:function(){this.user&&this.setUser(this.user)},methods:{submit:function(){var t=this;this.loading=!0,axios.request({method:this.user?"PUT":"POST",url:this.user?this.user.url_update:"/api/manage/users",data:this.form}).then(function(e){t.user?(t.$toasted.success(t.__("User updated")),t.loading=!1):(t.$toasted.success(t.__("User created")),t.form={name:"",email:"",is_admin:!1,password:"",password_confirmation:""}),t.resetFormError(),t.$emit("submited")}).catch(function(e){"error"===e.response.data.status?t.$toasted.error(e.response.data.message):t.$toasted.error(t.__("Unable to save user")),t.setFormError(e),t.loading=!1})},setUser:function(t){this.form={name:"",email:"",is_admin:!1,password:"",password_confirmation:""},this.resetFormError(),t&&(this.form.name=t.name,this.form.email=t.email,this.form.is_admin=t.is_admin)}},watch:{user:function(t){this.setUser(t)}}},s=n("KHd+"),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v(t._s(t.__("Name")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("name")},attrs:{type:"text",id:"name",disabled:t.loading},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.hasFormError("name")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("name")))]):t._e()])]),t._v(" "),n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"email"}},[t._v(t._s(t.__("E-Mail Address")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("email")},attrs:{type:"text",id:"email",disabled:t.loading},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),t.hasFormError("email")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("email")))]):t._e()])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v(t._s(t.__("Password")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("password")},attrs:{type:"password",id:"password",disabled:t.loading},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),t.hasFormError("password")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("password")))]):t._e()])]),t._v(" "),n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password_confirmation"}},[t._v(t._s(t.__("Confirm Password")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",attrs:{type:"password",id:"password_confirmation",disabled:t.loading},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_admin,expression:"form.is_admin"}],staticClass:"custom-control-input",class:{"is-invalid":t.hasFormError("is_admin")},attrs:{type:"checkbox",id:"is_admin",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_admin)?t._i(t.form.is_admin,null)>-1:t.form.is_admin},on:{change:function(e){var n=t.form.is_admin,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_admin",n.concat([null])):s>-1&&t.$set(t.form,"is_admin",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_admin",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_admin"}},[t._v(t._s(t.__("Is admin?")))])]),t._v(" "),n("span",{staticClass:"text-muted"},[t._v(t._s(t.__("Admin users can access settings and other users private content")))])]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t.loading?n("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n        "+t._s(t.__("Save"))+"\n    ")])])},[],!1,null,null,null);e.default=o.exports},cNyC:function(t,e,n){"use strict";n.r(e);var i={props:{tag:{type:String,required:!1,default:"a"},text:{type:String,required:!1,default:"Click"},textConfirm:{type:String,required:!1,default:"Confirm"},duration:{type:Number,required:!1,default:500},href:{type:null|String,required:!1,default:null}},data:function(){return{clicked:!1}},methods:{click:function(){var t=this;if(this.clicked)return this.confirmed();this.clicked=!0,setTimeout(function(){t.clicked=!1},this.duration)},confirmed:function(){this.href&&(window.location=this.href),this.$emit("confirmed")}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.click(e)}}},[t.clicked?n("span",{domProps:{innerHTML:t._s(t.textConfirm)}}):n("span",{domProps:{innerHTML:t._s(t.text)}})])},[],!1,null,null,null);e.default=s.exports},fKCf:function(t,e){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},iyXs:function(t,e,n){"use strict";n.r(e);var i={props:{name:{type:String,required:!0},values:{type:Object,required:!1,default:null}},data:function(){return{type:"image",original:null,gradient:{start:null,end:null,orientation:0},image:{base64:null}}},mounted:function(){this.values&&(this.type=this.values.type,"gradient"===this.type&&(this.gradient.start=this.values.start||null,this.gradient.end=this.values.end||null,this.gradient.orientation=this.values.orientation||90)),this.original=$("body").css("background-image")},methods:{handleFile:function(t){var e=this,n=t.target.files[0],i=new FileReader;!1!==n.type.match("image/*")&&(i.onload=function(){e.image.base64=i.result},i.readAsDataURL(n))},setBackground:function(){"none"===this.type&&$("body").css("background-image",""),"image"===this.type&&$("body").css({"background-image":this.backgroundImage,"background-size":"cover","background-repeat":"no-repeat","background-position":"center center"}),"gradient"===this.type&&$("body").css("background-image",this.backgroundGradient)}},computed:{backgroundGradient:function(){return this.gradient.start&&this.gradient.end?"linear-gradient(".concat(this.gradient.orientation,"deg, ").concat(this.gradient.start," 0%, ").concat(this.gradient.end," 100%)"):null},backgroundImage:function(){return this.image.base64?'url("'.concat(this.image.base64,'")'):null},data:function(){var t=JSON.stringify({type:"none"});return"gradient"===this.type&&this.backgroundGradient&&(t=JSON.stringify({type:"gradient",start:this.gradient.start,end:this.gradient.end,orientation:this.gradient.orientation})),"image"===this.type&&this.backgroundImage&&(t=JSON.stringify({type:"image",base64:this.image.base64})),t}},watch:{type:function(t){this.setBackground()},backgroundImage:function(t){this.setBackground()},backgroundGradient:function(t){this.setBackground()}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-control custom-select",attrs:{id:"type"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"none"}},[t._v(t._s(t.__("None")))]),t._v(" "),n("option",{attrs:{value:"image"}},[t._v(t._s(t.__("Image")))]),t._v(" "),n("option",{attrs:{value:"gradient"}},[t._v(t._s(t.__("Gradient")))])])]),t._v(" "),"image"===t.type?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"custom-file"},[n("label",{staticClass:"custom-file-label",attrs:{for:"file","data-browse":t.__("Browse")}},[t._v(t._s(t.__("File")))]),t._v(" "),n("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file",accept:"image/*"},domProps:{value:t.image.name},on:{change:t.handleFile}})])])])]):t._e(),t._v(" "),"gradient"===t.type?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"start"}},[t._v(t._s(t.__("Color #:number",{number:1})))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gradient.start,expression:"gradient.start"}],staticClass:"form-control",attrs:{type:"color",id:"start"},domProps:{value:t.gradient.start},on:{input:function(e){e.target.composing||t.$set(t.gradient,"start",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"end"}},[t._v(t._s(t.__("Color #:number",{number:2})))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gradient.end,expression:"gradient.end"}],staticClass:"form-control",attrs:{type:"color",id:"end"},domProps:{value:t.gradient.end},on:{input:function(e){e.target.composing||t.$set(t.gradient,"end",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"orientation"}},[t._v(t._s(t.__("Orientation")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gradient.orientation,expression:"gradient.orientation"}],staticClass:"form-control",attrs:{type:"number",id:"orientation",min:"0",max:"360",step:"5"},domProps:{value:t.gradient.orientation},on:{input:function(e){e.target.composing||t.$set(t.gradient,"orientation",e.target.value)}}})])])])]):t._e(),t._v(" "),n("input",{attrs:{type:"hidden",name:t.name,id:"name"},domProps:{value:t.data}})])},[],!1,null,null,null);e.default=s.exports},jPMG:function(t,e,n){"use strict";n.r(e);var i={props:{endpoint:{type:String,required:!0}},methods:{purge:function(){var t=this;axios.post(this.endpoint).then(function(e){t.$toasted.success(t.__("Logins history has been purged")),window.location.reload()}).catch(function(e){console.log(e),t.$toasted.error(t.__("Unable to purge logins history"))})}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("confirm",{attrs:{text:this.__("Purge"),"text-confirm":this.__("Confirm")},on:{confirmed:this.purge}})},[],!1,null,null,null);e.default=s.exports},kuJz:function(t,e,n){"use strict";n.r(e);var i={props:{single:{type:Boolean,required:!1,default:!1},link:{type:Object,required:!0,default:function(){}}},methods:{remove:function(){var t=this;axios.delete(this.link.url_delete).then(function(e){t.$toasted.success(t.__("Link :name has been deleted",{name:t.link.title})),t.single?window.location="/":window.location.reload()}).catch(function(e){t.$toasted.error(t.__("Unable to delete link"))})},preview:function(){var t=this;axios.put(this.link.url_preview).then(function(e){t.$toasted.success(t.__("Link preview has been updated")),window.location.reload()}).catch(function(e){t.$toasted.error(t.__("Unable to update link preview"))})}},computed:{displayUrl:function(){var t=this.link.url;if(t.length>65){var e=t.substr(0,62);return"".concat(e,"...")}return t}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--link mb-4",class:{"card-single":t.single,"card-index":!t.single}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t.link.is_pinned&&!t.single?n("i",{staticClass:"fas fa-thumbtack fa-sm pr-1"}):t._e(),t._v(" "),n("span",[t._v(t._s(t.__("Link")))]),t._v(" — "),n("a",{attrs:{href:t.link.permalink}},[t._v(t._s(t.link.title))]),n("br"),t._v(" "),n("a",{staticClass:"small text-muted",attrs:{href:t.link.url}},[t._v(t._s(t.displayUrl))])]),t._v(" "),n("p",{staticClass:"card-content",domProps:{innerHTML:t._s(t.link.content)}}),t._v(" "),t.link.preview?n("div",{staticClass:"card-preview mb-1",domProps:{innerHTML:t._s(t.link.preview)}}):t._e(),t._v(" "),t.link.tags.length>0?n("p",{staticClass:"card-text mt-1"},t._l(t.link.tags,function(e){return n("a",{staticClass:"badge badge-secondary mr-1",attrs:{href:"/tag/"+e}},[t._v(t._s(e))])}),0):t._e()]),t._v(" "),n("div",{staticClass:"card-footer d-flex justify-content-between"},[n("span",[t.link.is_private?n("i",{staticClass:"fas fa-lock pr-2"}):t._e(),t._v(t._s(t.link.date_formated))]),t._v(" "),n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-outline-dark btn-sm dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                "+t._s(t.__("More"))+"\n            ")]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",attrs:{href:t.link.permalink}},[n("i",{staticClass:"fas fa-link fa-fw mr-1"}),t._v(" "+t._s(t.__("Permalink")))]),t._v(" "),t.link.url_download?n("a",{staticClass:"dropdown-item",attrs:{href:t.link.url_download}},[n("i",{staticClass:"fas fa-file-download fa-fw mr-1"}),t._v(" "+t._s(t.__("Download archive")))]):t._e(),t._v(" "),t.link.editable?n("h6",{staticClass:"dropdown-header"},[t._v(t._s(t.__("Manage")))]):t._e(),t._v(" "),t.link.editable?n("confirm",{staticClass:"dropdown-item",attrs:{text:"<i class='fas fa-sync fa-fw mr-1'></i> "+t.__("Update preview"),"text-confirm":"<i class='fas fa-check fa-fw mr-1'></i> "+t.__("Confirm")},on:{confirmed:t.preview}}):t._e(),t._v(" "),t.link.editable?n("a",{staticClass:"dropdown-item",on:{click:function(e){return t.$bus.$emit("share",t.link)}}},[n("i",{staticClass:"fas fa-share-square fa-fw mr-1"}),t._v(" "+t._s(t.__("Temp sharing")))]):t._e(),t._v(" "),t.link.editable?n("a",{staticClass:"dropdown-item",attrs:{href:t.link.url_edit}},[n("i",{staticClass:"fas fa-pen-alt fa-fw mr-1"}),t._v(" "+t._s(t.__("Edit")))]):t._e(),t._v(" "),t.link.editable?n("confirm",{staticClass:"dropdown-item",attrs:{text:"<i class='fas fa-trash-alt fa-fw mr-1'></i> "+t.__("Delete"),"text-confirm":"<i class='fas fa-check fa-fw mr-1'></i> "+t.__("Confirm")},on:{confirmed:t.remove}}):t._e()],1)])])])},[],!1,null,null,null);e.default=s.exports},p7ys:function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},pyCd:function(t,e){},tEIc:function(t,e,n){"use strict";n.r(e);var i={props:{message:{type:String,required:!0},type:{type:String,required:!1,default:"success"}},mounted:function(){this.message.length>0&&this.$toasted.show(this.message,{type:this.type})}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null);e.default=s.exports},uB4Z:function(t,e,n){!function(e,n){"use strict";function i(t,e,n){this.root=this.currentNode=t,this.nodeType=e,this.filter=n||lt}function r(t){return t.nodeType===L&&!!dt[t.nodeName]}function s(t){switch(t.nodeType){case R:return ft;case L:case U:if(rt&&mt.has(t))return mt.get(t);break;default:return ut}var e;return e=function(t,e){for(var n=t.length;n--;)if(!e(t[n]))return!1;return!0}(t.childNodes,o)?ct.test(t.nodeName)?ft:ht:pt,rt&&mt.set(t,e),e}function o(t){return s(t)===ft}function a(t){return s(t)===ht}function l(t){return s(t)===pt}function c(t,e){var n=new i(e,I,a);return n.currentNode=t,n}function d(t,e){return(t=c(t,e).previousNode())!==e?t:null}function u(t,e){return(t=c(t,e).nextNode())!==e?t:null}function f(t,e){return!r(t)&&t.nodeType===e.nodeType&&t.nodeName===e.nodeName&&"A"!==t.nodeName&&t.className===e.className&&(!t.style&&!e.style||t.style.cssText===e.style.cssText)}function h(t,e,n){if(t.nodeName!==e)return!1;for(var i in n)if(t.getAttribute(i)!==n[i])return!1;return!0}function p(t,e,n,i){for(;t&&t!==e;){if(h(t,n,i))return t;t=t.parentNode}return null}function m(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function _(t){var e=t.nodeType;return e===L||e===U?t.childNodes.length:t.length||0}function v(t){var e=t.parentNode;return e&&e.removeChild(t),t}function g(t,e){var n=t.parentNode;n&&n.replaceChild(e,t)}function C(t){for(var e=t.ownerDocument.createDocumentFragment(),n=t.childNodes,i=n?n.length:0;i--;)e.appendChild(t.firstChild);return e}function y(t,e,i,r){var s,o,a,l=t.createElement(e);if(i instanceof Array&&(r=i,i=null),i)for(s in i)i[s]!==n&&l.setAttribute(s,i[s]);if(r)for(o=0,a=r.length;o<a;o+=1)l.appendChild(r[o]);return l}function b(t,e){var n,i,s=e.__squire__,a=t.ownerDocument,l=t;if(t===e&&((i=t.firstChild)&&"BR"!==i.nodeName||(n=s.createDefaultBlock(),i?t.replaceChild(n,i):t.appendChild(n),t=n,n=null)),t.nodeType===R)return l;if(o(t)){for(i=t.firstChild;et&&i&&i.nodeType===R&&!i.data;)t.removeChild(i),i=t.firstChild;i||(et?(n=a.createTextNode(H),s._didAddZWS()):n=a.createTextNode(""))}else if(tt){for(;t.nodeType!==R&&!r(t);){if(!(i=t.firstChild)){n=a.createTextNode("");break}t=i}t.nodeType===R?/^ +$/.test(t.data)&&(t.data=""):r(t)&&t.parentNode.insertBefore(a.createTextNode(""),t)}else if("HR"!==t.nodeName&&!t.querySelector("BR"))for(n=y(a,"BR");(i=t.lastElementChild)&&!o(i);)t=i;if(n)try{t.appendChild(n)}catch(e){s.didError({name:"Squire: fixCursor – "+e,message:"Parent: "+t.nodeName+"/"+t.innerHTML+" appendChild: "+n.nodeName})}return l}function w(t,e){var n,i,r,s,a=t.childNodes,c=t.ownerDocument,d=null,u=e.__squire__._config;for(n=0,i=a.length;n<i;n+=1)!(s="BR"===(r=a[n]).nodeName)&&o(r)?(d||(d=y(c,u.blockTag,u.blockAttributes)),d.appendChild(r),n-=1,i-=1):(s||d)&&(d||(d=y(c,u.blockTag,u.blockAttributes)),b(d,e),s?t.replaceChild(d,r):(t.insertBefore(d,r),n+=1,i+=1),d=null),l(r)&&w(r,e);return d&&t.appendChild(b(d,e)),t}function k(t,e,n,i){var r,s,o,a=t.nodeType;if(a===R&&t!==n)return k(t.parentNode,t.splitText(e),n,i);if(a===L){if("number"==typeof e&&(e=e<t.childNodes.length?t.childNodes[e]:null),t===n)return e;for(r=t.parentNode,s=t.cloneNode(!1);e;)o=e.nextSibling,s.appendChild(e),e=o;return"OL"===t.nodeName&&p(t,i,"BLOCKQUOTE")&&(s.start=(+t.start||1)+t.childNodes.length-1),b(t,i),b(s,i),(o=t.nextSibling)?r.insertBefore(s,o):r.appendChild(s),k(r,s,n,i)}return e}function E(t,e){if(t.nodeType===R&&(t=t.parentNode),t.nodeType===L){var n={startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset};(function t(e,n){for(var i,r,s,a=e.childNodes,l=a.length,c=[];l--;)if(i=a[l],r=l&&a[l-1],l&&o(i)&&f(i,r)&&!dt[i.nodeName])n.startContainer===i&&(n.startContainer=r,n.startOffset+=_(r)),n.endContainer===i&&(n.endContainer=r,n.endOffset+=_(r)),n.startContainer===e&&(n.startOffset>l?n.startOffset-=1:n.startOffset===l&&(n.startContainer=r,n.startOffset=_(r))),n.endContainer===e&&(n.endOffset>l?n.endOffset-=1:n.endOffset===l&&(n.endContainer=r,n.endOffset=_(r))),v(i),i.nodeType===R?r.appendData(i.data):c.push(C(i));else if(i.nodeType===L){for(s=c.length;s--;)i.appendChild(c.pop());t(i,n)}})(t,n),e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}}function x(t){var e=t.nodeName;return"TD"===e||"TH"===e||"TR"===e||"TBODY"===e||"THEAD"===e}function S(t,e,n,i){var r,s,o,a=e;if(!x(t)||!x(e)){for(;(r=a.parentNode)&&r!==i&&r.nodeType===L&&1===r.childNodes.length;)a=r;v(a),o=t.childNodes.length,(s=t.lastChild)&&"BR"===s.nodeName&&(t.removeChild(s),o-=1),t.appendChild(C(e)),n.setStart(t,o),n.collapse(!0),E(t,n),Z&&(s=t.lastChild)&&"BR"===s.nodeName&&t.removeChild(s)}}function N(t,e){var n,i,r=t.previousSibling,s=t.firstChild,o=t.ownerDocument,a="LI"===t.nodeName;if((!a||s&&/^[OU]L$/.test(s.nodeName))&&!x(t))if(r&&f(r,t)&&r.isContentEditable&&t.isContentEditable){if(!l(r)){if(!a)return;(i=y(o,"DIV")).appendChild(C(r)),r.appendChild(i)}v(t),n=!l(t),r.appendChild(C(t)),n&&w(r,e),s&&N(s,e)}else a&&(r=y(o,"DIV"),t.insertBefore(r,s),b(r,e))}function D(t){this.isShiftDown=t.shiftKey}function T(t,e,n){var i,r;if(t||(t={}),e)for(i in e)!n&&i in t||(r=e[i],t[i]=r&&r.constructor===Object?T(t[i],r,n):r);return t}function F(t,e){t.nodeType===$&&(t=t.body);var n,i=t.ownerDocument,r=i.defaultView;this._win=r,this._doc=i,this._root=t,this._events={},this._isFocused=!1,this._lastSelection=null,nt&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in i?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,it?((n=new MutationObserver(this._docWasChanged.bind(this))).observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=n):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",A),this.addEventListener("mousedown",O),this.addEventListener("touchstart",O),this.addEventListener("focus",B),this._awaitingPaste=!1,this.addEventListener(G?"beforecut":"cut",Qt),this.addEventListener("copy",Yt),this.addEventListener("keydown",D),this.addEventListener("keyup",D),this.addEventListener(G?"beforepaste":"paste",Jt),this.addEventListener("drop",te),this.addEventListener(Z?"keypress":"keydown",Ot),this._keyHandlers=Object.create(Rt),this.setConfig(e),G&&(r.Text.prototype.splitText=function(t){var e=this.ownerDocument.createTextNode(this.data.slice(t)),n=this.nextSibling,i=this.parentNode,r=this.length-t;return n?i.insertBefore(e,n):i.appendChild(e),r&&this.deleteData(t,r),e}),t.setAttribute("contenteditable","true");try{i.execCommand("enableObjectResizing",!1,"false"),i.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}t.__squire__=this,this.setHTML("")}function A(){this._restoreSelection=!0}function O(){this._restoreSelection=!1}function B(){this._restoreSelection&&this.setSelection(this._lastSelection)}function P(t,e,n){var i,r;for(i=e.firstChild;i;i=r){if(r=i.nextSibling,o(i)){if(i.nodeType===R||"BR"===i.nodeName||"IMG"===i.nodeName){n.appendChild(i);continue}}else if(a(i)){n.appendChild(t.createDefaultBlock([P(t,i,t._doc.createDocumentFragment())]));continue}P(t,i,n)}return n}var L=1,R=3,$=9,U=11,I=1,H="​",M=e.defaultView,q=navigator.userAgent,j=/Android/.test(q),z=/iP(?:ad|hone|od)/.test(q),K=/Mac OS X/.test(q),W=/Windows NT/.test(q),V=/Gecko\//.test(q),G=/Trident\/[456]\./.test(q),Z=!!M.opera,X=/Edge\//.test(q),Q=!X&&/WebKit\//.test(q),Y=/Trident\/[4567]\./.test(q),J=K?"meta-":"ctrl-",tt=G||Z,et=G||Q,nt=G,it="undefined"!=typeof MutationObserver,rt="undefined"!=typeof WeakMap,st=/[^ \t\r\n]/,ot=Array.prototype.indexOf;Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e});var at={1:1,2:2,3:4,8:128,9:256,11:1024},lt=function(){return!0};i.prototype.nextNode=function(){for(var t,e=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(t=e.firstChild;!t&&e&&e!==n;)(t=e.nextSibling)||(e=e.parentNode);if(!t)return null;if(at[t.nodeType]&i&&r(t))return this.currentNode=t,t;e=t}},i.prototype.previousNode=function(){for(var t,e=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){if(e===n)return null;if(t=e.previousSibling)for(;e=t.lastChild;)t=e;else t=e.parentNode;if(!t)return null;if(at[t.nodeType]&i&&r(t))return this.currentNode=t,t;e=t}},i.prototype.previousPONode=function(){for(var t,e=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(t=e.lastChild;!t&&e&&e!==n;)(t=e.previousSibling)||(e=e.parentNode);if(!t)return null;if(at[t.nodeType]&i&&r(t))return this.currentNode=t,t;e=t}};var ct=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,dt={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1},ut=0,ft=1,ht=2,pt=3,mt=rt?new WeakMap:null,_t=function(t,e){for(var n=t.childNodes;e&&t.nodeType===L;)e=(n=(t=n[e-1]).childNodes).length;return t},vt=function(t,e){if(t.nodeType===L){var n=t.childNodes;if(e<n.length)t=n[e];else{for(;t&&!t.nextSibling;)t=t.parentNode;t&&(t=t.nextSibling)}}return t},gt=function(t,e){var n,i,r,s,o=t.startContainer,a=t.startOffset,l=t.endContainer,c=t.endOffset;o.nodeType===R?(i=(n=o.parentNode).childNodes,a===o.length?(a=ot.call(i,o)+1,t.collapsed&&(l=n,c=a)):(a&&(s=o.splitText(a),l===o?(c-=a,l=s):l===n&&(c+=1),o=s),a=ot.call(i,o)),o=n):i=o.childNodes,a===(r=i.length)?o.appendChild(e):o.insertBefore(e,i[a]),o===l&&(c+=i.length-r),t.setStart(o,a),t.setEnd(l,c)},Ct=function(t,e,n){var i=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset;e||(e=t.commonAncestorContainer),e.nodeType===R&&(e=e.parentNode);for(var a,l,c,d,u,f=k(s,o,e,n),h=k(i,r,e,n),p=e.ownerDocument.createDocumentFragment();h!==f;)a=h.nextSibling,p.appendChild(h),h=a;return i=e,r=f?ot.call(e.childNodes,f):e.childNodes.length,(l=(c=e.childNodes[r])&&c.previousSibling)&&l.nodeType===R&&c.nodeType===R&&(i=l,r=l.length,d=l.data,u=c.data," "===d.charAt(d.length-1)&&" "===u.charAt(0)&&(u=" "+u.slice(1)),l.appendData(u),v(c)),t.setStart(i,r),t.collapse(!0),b(e,n),p},yt=function(t,e){var n,i,r=xt(t,e),s=St(t,e),o=r!==s;return kt(t),Et(t,r,s,e),n=Ct(t,null,e),kt(t),o&&(s=St(t,e),r&&s&&r!==s&&S(r,s,t,e)),r&&b(r,e),(i=e.firstChild)&&"BR"!==i.nodeName?t.collapse(!0):(b(e,e),t.selectNodeContents(e.firstChild)),n},bt=function(t,e,n){var i,r,s,a,c,f,h,m,v,g;for(w(e,n),i=e;i=u(i,n);)b(i,n);if(t.collapsed||yt(t,n),kt(t),t.collapse(!1),a=p(t.endContainer,n,"BLOCKQUOTE")||n,r=xt(t,n),h=u(e,e),r&&h&&!function(t,e,n){for(;t&&t!==e;){if(n.test(t.nodeName))return t;t=t.parentNode}return null}(h,e,/PRE|TABLE|H[1-6]|OL|UL|BLOCKQUOTE/)){if(Et(t,r,r,n),t.collapse(!0),c=t.endContainer,f=t.endOffset,Zt(r,n,!1),o(c)&&(c=(m=k(c,f,d(c,n),n)).parentNode,f=ot.call(c.childNodes,m)),f!==_(c))for(s=n.ownerDocument.createDocumentFragment();i=c.childNodes[f];)s.appendChild(i);S(c,h,t,n),f=ot.call(c.parentNode.childNodes,c)+1,c=c.parentNode,t.setEnd(c,f)}_(e)&&(Et(t,a,a,n),v=(m=k(t.endContainer,t.endOffset,a,n))?m.previousSibling:a.lastChild,a.insertBefore(e,m),m?t.setEndBefore(m):t.setEnd(a,_(a)),r=St(t,n),kt(t),c=t.endContainer,f=t.endOffset,m&&l(m)&&N(m,n),(m=v&&v.nextSibling)&&l(m)&&N(m,n),t.setEnd(c,f)),s&&(S(r,s,g=t.cloneRange(),n),t.setEnd(g.endContainer,g.endOffset)),kt(t)},wt=function(t,e,n){var i=e.ownerDocument.createRange();if(i.selectNode(e),n){var r=t.compareBoundaryPoints(3,i)>-1,s=t.compareBoundaryPoints(1,i)<1;return!r&&!s}var o=t.compareBoundaryPoints(0,i)<1,a=t.compareBoundaryPoints(2,i)>-1;return o&&a},kt=function(t){for(var e,n=t.startContainer,i=t.startOffset,s=t.endContainer,o=t.endOffset,a=!0;n.nodeType!==R&&(e=n.childNodes[i])&&!r(e);)n=e,i=0;if(o)for(;s.nodeType!==R;){if(!(e=s.childNodes[o-1])||r(e)){if(a&&e&&"BR"===e.nodeName){o-=1,a=!1;continue}break}o=_(s=e)}else for(;s.nodeType!==R&&(e=s.firstChild)&&!r(e);)s=e;t.collapsed?(t.setStart(s,o),t.setEnd(n,i)):(t.setStart(n,i),t.setEnd(s,o))},Et=function(t,e,n,i){var r,s=t.startContainer,o=t.startOffset,a=t.endContainer,l=t.endOffset,c=!0;for(e||(e=t.commonAncestorContainer),n||(n=e);!o&&s!==e&&s!==i;)r=s.parentNode,o=ot.call(r.childNodes,s),s=r;for(;c&&a.nodeType!==R&&a.childNodes[l]&&"BR"===a.childNodes[l].nodeName&&(l+=1,c=!1),a!==n&&a!==i&&l===_(a);)r=a.parentNode,l=ot.call(r.childNodes,a)+1,a=r;t.setStart(s,o),t.setEnd(a,l)},xt=function(t,e){var n,i=t.startContainer;return o(i)?n=d(i,e):i!==e&&a(i)?n=i:n=u(n=_t(i,t.startOffset),e),n&&wt(t,n,!0)?n:null},St=function(t,e){var n,i,r=t.endContainer;if(o(r))n=d(r,e);else if(r!==e&&a(r))n=r;else{if(!(n=vt(r,t.endOffset))||!m(e,n))for(n=e;i=n.lastChild;)n=i;n=d(n,e)}return n&&wt(t,n,!0)?n:null},Nt=new i(null,4|I,function(t){return t.nodeType===R?st.test(t.data):"IMG"===t.nodeName}),Dt=function(t,e){var n,i=t.startContainer,r=t.startOffset;if(Nt.root=null,i.nodeType===R){if(r)return!1;n=i}else if((n=vt(i,r))&&!m(e,n)&&(n=null),!n&&((n=_t(i,r)).nodeType===R&&n.length))return!1;return Nt.currentNode=n,Nt.root=xt(t,e),!Nt.previousNode()},Tt=function(t,e){var n,i=t.endContainer,r=t.endOffset;if(Nt.root=null,i.nodeType===R){if((n=i.data.length)&&r<n)return!1;Nt.currentNode=i}else Nt.currentNode=_t(i,r);return Nt.root=St(t,e),!Nt.nextNode()},Ft=function(t,e){var n,i=xt(t,e),r=St(t,e);i&&r&&(n=i.parentNode,t.setStart(n,ot.call(n.childNodes,i)),n=r.parentNode,t.setEnd(n,ot.call(n.childNodes,r)+1))},At={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},Ot=function(t){var e=t.keyCode,n=At[e],i="",r=this.getSelection();t.defaultPrevented||(n||(n=String.fromCharCode(e).toLowerCase(),/^[A-Za-z0-9]$/.test(n)||(n="")),Z&&46===t.which&&(n="."),111<e&&e<124&&(n="f"+(e-111)),"backspace"!==n&&"delete"!==n&&(t.altKey&&(i+="alt-"),t.ctrlKey&&(i+="ctrl-"),t.metaKey&&(i+="meta-")),t.shiftKey&&(i+="shift-"),n=i+n,this._keyHandlers[n]?this._keyHandlers[n](this,t,r):r.collapsed||t.isComposing||t.ctrlKey||t.metaKey||1!==(Y?n:t.key||n).length||(this.saveUndoState(r),yt(r,this._root),this._ensureBottomLine(),this.setSelection(r),this._updatePath(r,!0)))},Bt=function(t){return function(e,n){n.preventDefault(),e[t]()}},Pt=function(t,e){return e=e||null,function(n,i){i.preventDefault();var r=n.getSelection();n.hasFormat(t,null,r)?n.changeFormat(null,{tag:t},r):n.changeFormat({tag:t},e,r)}},Lt=function(t,e){try{e||(e=t.getSelection());var n,i=e.startContainer;for(i.nodeType===R&&(i=i.parentNode),n=i;o(n)&&(!n.textContent||n.textContent===H);)n=(i=n).parentNode;i!==n&&(e.setStart(n,ot.call(n.childNodes,i)),e.collapse(!0),n.removeChild(i),a(n)||(n=d(n,t._root)),b(n,t._root),kt(e)),i===t._root&&(i=i.firstChild)&&"BR"===i.nodeName&&v(i),t._ensureBottomLine(),t.setSelection(e),t._updatePath(e,!0)}catch(e){t.didError(e)}},Rt={enter:function(t,e,n){var i,r,s,o,a,l=t._root;if(e.preventDefault(),t._recordUndoState(n),he(n.startContainer,l,t),t._removeZWS(),t._getRangeAndRemoveBookmark(n),n.collapsed||yt(n,l),(i=xt(n,l))&&(r=p(i,l,"PRE")))return kt(n),s=n.startContainer,o=n.startOffset,s.nodeType!==R&&(s=t._doc.createTextNode(""),r.insertBefore(s,r.firstChild)),e.shiftKey||"\n"!==s.data.charAt(o-1)&&!Dt(n,l)||"\n"!==s.data.charAt(o)&&!Tt(n,l)?(s.insertData(o,"\n"),b(r,l),s.length===o+1?n.setStartAfter(s):n.setStart(s,o+1)):(s.deleteData(o&&o-1,o?2:1),(s=(a=k(s,o&&o-1,l,l)).previousSibling).textContent||v(s),s=t.createDefaultBlock(),a.parentNode.insertBefore(s,a),a.textContent||v(a),n.setStart(s,0)),n.collapse(!0),t.setSelection(n),t._updatePath(n,!0),void t._docWasChanged();if(!i||e.shiftKey||/^T[HD]$/.test(i.nodeName))return(r=p(n.endContainer,l,"A"))&&(r=r.parentNode,Et(n,r,r,l),n.collapse(!1)),gt(n,t.createElement("BR")),n.collapse(!1),t.setSelection(n),void t._updatePath(n,!0);if((r=p(i,l,"LI"))&&(i=r),function(t){return!t.textContent&&!t.querySelector("IMG")}(i)){if(p(i,l,"UL")||p(i,l,"OL"))return t.decreaseListLevel(n);if(p(i,l,"BLOCKQUOTE"))return t.modifyBlocks(de,n)}for(a=le(t,i,n.startContainer,n.startOffset),se(i),Wt(i),b(i,l);a.nodeType===L;){var c,d=a.firstChild;if("A"===a.nodeName&&(!a.textContent||a.textContent===H)){g(a,d=t._doc.createTextNode("")),a=d;break}for(;d&&d.nodeType===R&&!d.data&&(c=d.nextSibling)&&"BR"!==c.nodeName;)v(d),d=c;if(!d||"BR"===d.nodeName||d.nodeType===R&&!Z)break;a=d}n=t.createRange(a,0),t.setSelection(n),t._updatePath(n,!0)},"shift-enter":function(t,e,n){return t._keyHandlers.enter(t,e,n)},backspace:function(t,e,n){var i=t._root;if(t._removeZWS(),t.saveUndoState(n),n.collapsed)if(Dt(n,i)){e.preventDefault();var r,s=xt(n,i);if(!s)return;if(w(s.parentNode,i),r=d(s,i)){if(!r.isContentEditable){for(;!r.parentNode.isContentEditable;)r=r.parentNode;return void v(r)}for(S(r,s,n,i),s=r.parentNode;s!==i&&!s.nextSibling;)s=s.parentNode;s!==i&&(s=s.nextSibling)&&N(s,i),t.setSelection(n)}else if(s){if(p(s,i,"UL")||p(s,i,"OL"))return t.decreaseListLevel(n);if(p(s,i,"BLOCKQUOTE"))return t.modifyBlocks(ce,n);t.setSelection(n),t._updatePath(n,!0)}}else t.setSelection(n),setTimeout(function(){Lt(t)},0);else e.preventDefault(),yt(n,i),Lt(t,n)},delete:function(t,e,n){var i,r,s,o,a,l,c=t._root;if(t._removeZWS(),t.saveUndoState(n),n.collapsed)if(Tt(n,c)){if(e.preventDefault(),!(i=xt(n,c)))return;if(w(i.parentNode,c),r=u(i,c)){if(!r.isContentEditable){for(;!r.parentNode.isContentEditable;)r=r.parentNode;return void v(r)}for(S(i,r,n,c),r=i.parentNode;r!==c&&!r.nextSibling;)r=r.parentNode;r!==c&&(r=r.nextSibling)&&N(r,c),t.setSelection(n),t._updatePath(n,!0)}}else{if(s=n.cloneRange(),Et(n,c,c,c),o=n.endContainer,a=n.endOffset,o.nodeType===L&&(l=o.childNodes[a])&&"IMG"===l.nodeName)return e.preventDefault(),v(l),kt(n),void Lt(t,n);t.setSelection(s),setTimeout(function(){Lt(t)},0)}else e.preventDefault(),yt(n,c),Lt(t,n)},tab:function(t,e,n){var i,r,s=t._root;if(t._removeZWS(),n.collapsed&&Dt(n,s))for(i=xt(n,s);r=i.parentNode;){if("UL"===r.nodeName||"OL"===r.nodeName){e.preventDefault(),t.increaseListLevel(n);break}i=r}},"shift-tab":function(t,e,n){var i,r=t._root;t._removeZWS(),n.collapsed&&Dt(n,r)&&((p(i=n.startContainer,r,"UL")||p(i,r,"OL"))&&(e.preventDefault(),t.decreaseListLevel(n)))},space:function(t,e,n){var i,r=t._root;if(t._recordUndoState(n),he(n.startContainer,r,t),t._getRangeAndRemoveBookmark(n),i=n.endContainer,n.collapsed&&n.endOffset===_(i))do{if("A"===i.nodeName){n.setStartAfter(i);break}}while(!i.nextSibling&&(i=i.parentNode)&&i!==r);n.collapsed||(yt(n,r),t._ensureBottomLine(),t.setSelection(n),t._updatePath(n,!0)),t.setSelection(n)},left:function(t){t._removeZWS()},right:function(t){t._removeZWS()}};K&&V&&(Rt["meta-left"]=function(t,e){e.preventDefault();var n=re(t);n&&n.modify&&n.modify("move","backward","lineboundary")},Rt["meta-right"]=function(t,e){e.preventDefault();var n=re(t);n&&n.modify&&n.modify("move","forward","lineboundary")}),K||(Rt.pageup=function(t){t.moveCursorToStart()},Rt.pagedown=function(t){t.moveCursorToEnd()}),Rt[J+"b"]=Pt("B"),Rt[J+"i"]=Pt("I"),Rt[J+"u"]=Pt("U"),Rt[J+"shift-7"]=Pt("S"),Rt[J+"shift-5"]=Pt("SUB",{tag:"SUP"}),Rt[J+"shift-6"]=Pt("SUP",{tag:"SUB"}),Rt[J+"shift-8"]=Bt("makeUnorderedList"),Rt[J+"shift-9"]=Bt("makeOrderedList"),Rt[J+"["]=Bt("decreaseQuoteLevel"),Rt[J+"]"]=Bt("increaseQuoteLevel"),Rt[J+"d"]=Bt("toggleCode"),Rt[J+"y"]=Bt("redo"),Rt[J+"z"]=Bt("undo"),Rt[J+"shift-z"]=Bt("redo");var $t={1:10,2:13,3:16,4:18,5:24,6:32,7:48},Ut={backgroundColor:{regexp:st,replace:function(t,e,n){return y(t,"SPAN",{class:e.highlight,style:"background-color:"+n})}},color:{regexp:st,replace:function(t,e,n){return y(t,"SPAN",{class:e.colour,style:"color:"+n})}},fontWeight:{regexp:/^bold|^700/i,replace:function(t){return y(t,"B")}},fontStyle:{regexp:/^italic/i,replace:function(t){return y(t,"I")}},fontFamily:{regexp:st,replace:function(t,e,n){return y(t,"SPAN",{class:e.fontFamily,style:"font-family:"+n})}},fontSize:{regexp:st,replace:function(t,e,n){return y(t,"SPAN",{class:e.fontSize,style:"font-size:"+n})}},textDecoration:{regexp:/^underline/i,replace:function(t){return y(t,"U")}}},It=function(t){return function(e,n){var i=y(e.ownerDocument,t);return n.replaceChild(i,e),i.appendChild(C(e)),i}},Ht=function(t,e,n){var i,r,s,o,a,l,c=t.style,d=t.ownerDocument;for(i in Ut)r=Ut[i],(s=c[i])&&r.regexp.test(s)&&(l=r.replace(d,n.classNames,s),a||(a=l),o&&o.appendChild(l),o=l,t.style[i]="");return a&&(o.appendChild(C(t)),"SPAN"===t.nodeName?e.replaceChild(a,t):t.appendChild(a)),o||t},Mt={P:Ht,SPAN:Ht,STRONG:It("B"),EM:It("I"),INS:It("U"),STRIKE:It("S"),FONT:function(t,e,n){var i,r,s,o,a,l=t.face,c=t.size,d=t.color,u=t.ownerDocument,f=n.classNames;return l&&(a=i=y(u,"SPAN",{class:f.fontFamily,style:"font-family:"+l}),o=i),c&&(r=y(u,"SPAN",{class:f.fontSize,style:"font-size:"+$t[c]+"px"}),a||(a=r),o&&o.appendChild(r),o=r),d&&/^#?([\dA-F]{3}){1,2}$/i.test(d)&&("#"!==d.charAt(0)&&(d="#"+d),s=y(u,"SPAN",{class:f.colour,style:"color:"+d}),a||(a=s),o&&o.appendChild(s),o=s),a||(a=o=y(u,"SPAN")),e.replaceChild(a,t),o.appendChild(C(t)),o},TT:function(t,e,n){var i=y(t.ownerDocument,"SPAN",{class:n.classNames.fontFamily,style:'font-family:menlo,consolas,"courier new",monospace'});return e.replaceChild(i,t),i.appendChild(C(t)),i}},qt=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|HR|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL)$/,jt=/^(?:HEAD|META|STYLE)/,zt=new i(null,4|I),Kt=function t(e,n,i){var r,s,a,l,c,d,u,f,h,p,m,_,v=e.childNodes;for(r=e;o(r);)r=r.parentNode;for(zt.root=r,s=0,a=v.length;s<a;s+=1)if(c=(l=v[s]).nodeName,d=l.nodeType,u=Mt[c],d===L){if(f=l.childNodes.length,u)l=u(l,e,n);else{if(jt.test(c)){e.removeChild(l),s-=1,a-=1;continue}if(!qt.test(c)&&!o(l)){s-=1,a+=f-1,e.replaceChild(C(l),l);continue}}f&&t(l,n,i||"PRE"===c)}else{if(d===R){if(m=l.data,h=!st.test(m.charAt(0)),p=!st.test(m.charAt(m.length-1)),i||!h&&!p)continue;if(h){for(zt.currentNode=l;(_=zt.previousPONode())&&!("IMG"===(c=_.nodeName)||"#text"===c&&st.test(_.data));)if(!o(_)){_=null;break}m=m.replace(/^[ \t\r\n]+/g,_?" ":"")}if(p){for(zt.currentNode=l;(_=zt.nextNode())&&!("IMG"===c||"#text"===c&&st.test(_.data));)if(!o(_)){_=null;break}m=m.replace(/[ \t\r\n]+$/g,_?" ":"")}if(m){l.data=m;continue}}e.removeChild(l),s-=1,a-=1}return e},Wt=function t(e){for(var n,i=e.childNodes,s=i.length;s--;)(n=i[s]).nodeType!==L||r(n)?n.nodeType!==R||n.data||e.removeChild(n):(t(n),o(n)&&!n.firstChild&&e.removeChild(n))},Vt=function(t){return t.nodeType===L?"BR"===t.nodeName||"IMG"===t.nodeName:st.test(t.data)},Gt=function(t,e){for(var n,r=t.parentNode;o(r);)r=r.parentNode;return(n=new i(r,4|I,Vt)).currentNode=t,!!n.nextNode()||e&&!n.previousNode()},Zt=function(t,e,n){var i,r,s,a=t.querySelectorAll("BR"),l=[],c=a.length;for(i=0;i<c;i+=1)l[i]=Gt(a[i],n);for(;c--;)(s=(r=a[c]).parentNode)&&(l[c]?o(s)||w(s,e):v(r))},Xt=function(t,e,n,i){var r,s,o=e.ownerDocument.body,a=i.willCutCopy;Zt(e,n,!0),e.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),o.appendChild(e),r=e.innerHTML,s=e.innerText||e.textContent,a&&(r=a(r)),W&&(s=s.replace(/\r?\n/g,"\r\n")),t.setData("text/html",r),t.setData("text/plain",s),o.removeChild(e)},Qt=function(t){var e,n,i,r,s,o,a=t.clipboardData,l=this.getSelection(),c=this._root,d=this;if(l.collapsed)t.preventDefault();else{if(this.saveUndoState(l),X||z||!a)setTimeout(function(){try{d._ensureBottomLine()}catch(t){d.didError(t)}},0);else{for(n=(e=xt(l,c))===St(l,c)&&e||c,i=yt(l,c),(r=l.commonAncestorContainer).nodeType===R&&(r=r.parentNode);r&&r!==n;)(s=r.cloneNode(!1)).appendChild(i),i=s,r=r.parentNode;(o=this.createElement("div")).appendChild(i),Xt(a,o,c,this._config),t.preventDefault()}this.setSelection(l)}},Yt=function(t){var e,n,i,r,s,o,a=t.clipboardData,l=this.getSelection(),c=this._root;if(!X&&!z&&a){for(n=(e=xt(l,c))===St(l,c)&&e||c,l=l.cloneRange(),kt(l),Et(l,n,n,c),i=l.cloneContents(),(r=l.commonAncestorContainer).nodeType===R&&(r=r.parentNode);r&&r!==n;)(s=r.cloneNode(!1)).appendChild(i),i=s,r=r.parentNode;(o=this.createElement("div")).appendChild(i),Xt(a,o,c,this._config),t.preventDefault()}},Jt=function(t){var e,n,i,r,s,o=t.clipboardData,a=o&&o.items,l=this.isShiftDown,c=!1,d=!1,u=null,f=this;if(X&&a){for(e=a.length;e--;)!l&&/^image\/.*/.test(a[e].type)&&(d=!0);d||(a=null)}if(a){for(t.preventDefault(),e=a.length;e--;){if(i=(n=a[e]).type,!l&&"text/html"===i)return void n.getAsString(function(t){f.insertHTML(t,!0)});"text/plain"===i&&(u=n),!l&&/^image\/.*/.test(i)&&(d=!0)}d?(this.fireEvent("dragover",{dataTransfer:o,preventDefault:function(){c=!0}}),c&&this.fireEvent("drop",{dataTransfer:o})):u&&u.getAsString(function(t){f.insertPlainText(t,!0)})}else{if(r=o&&o.types,!X&&r&&(ot.call(r,"text/html")>-1||!V&&ot.call(r,"text/plain")>-1&&ot.call(r,"text/rtf")<0))return t.preventDefault(),void(!l&&(s=o.getData("text/html"))?this.insertHTML(s,!0):((s=o.getData("text/plain"))||(s=o.getData("text/uri-list")))&&this.insertPlainText(s,!0));this._awaitingPaste=!0;var h=this._doc.body,p=this.getSelection(),m=p.startContainer,_=p.startOffset,g=p.endContainer,C=p.endOffset,y=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});h.appendChild(y),p.selectNodeContents(y),this.setSelection(p),setTimeout(function(){try{f._awaitingPaste=!1;for(var t,e,n="",i=y;y=i;)i=y.nextSibling,v(y),(t=y.firstChild)&&t===y.lastChild&&"DIV"===t.nodeName&&(y=t),n+=y.innerHTML;e=f.createRange(m,_,g,C),f.setSelection(e),n&&f.insertHTML(n,!0)}catch(t){f.didError(t)}},0)}},te=function(t){for(var e=t.dataTransfer.types,n=e.length,i=!1,r=!1;n--;)switch(e[n]){case"text/plain":i=!0;break;case"text/html":r=!0;break;default:return}(r||i)&&this.saveUndoState()},ee=F.prototype,ne=function(t,e,n){var i=n._doc,r=t?DOMPurify.sanitize(t,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}):null;return r?i.importNode(r,!0):i.createDocumentFragment()};ee.setConfig=function(t){return(t=T({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:null},classNames:{colour:"colour",fontFamily:"font",fontSize:"size",highlight:"highlight"},leafNodeNames:dt,undo:{documentSizeThreshold:-1,undoLimit:-1},isInsertedHTMLSanitized:!0,isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?ne:null,willCutCopy:null},t,!0)).blockTag=t.blockTag.toUpperCase(),this._config=t,this},ee.createElement=function(t,e,n){return y(this._doc,t,e,n)},ee.createDefaultBlock=function(t){var e=this._config;return b(this.createElement(e.blockTag,e.blockAttributes,t),this._root)},ee.didError=function(t){console.log(t)},ee.getDocument=function(){return this._doc},ee.getRoot=function(){return this._root},ee.modifyDocument=function(t){var e=this._mutation;e&&(e.takeRecords().length&&this._docWasChanged(),e.disconnect()),this._ignoreAllChanges=!0,t(),this._ignoreAllChanges=!1,e&&(e.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var ie={pathChange:1,select:1,input:1,undoStateChange:1};ee.fireEvent=function(t,e){var n,i,r,s=this._events[t];if(/^(?:focus|blur)/.test(t))if(n=this._root===this._doc.activeElement,"focus"===t){if(!n||this._isFocused)return this;this._isFocused=!0}else{if(n||!this._isFocused)return this;this._isFocused=!1}if(s)for(e||(e={}),e.type!==t&&(e.type=t),i=(s=s.slice()).length;i--;){r=s[i];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){e.details="Squire: fireEvent error. Event type: "+t,this.didError(e)}}return this},ee.destroy=function(){var t,e=this._events;for(t in e)this.removeEventListener(t);this._mutation&&this._mutation.disconnect(),delete this._root.__squire__,this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},ee.handleEvent=function(t){this.fireEvent(t.type,t)},ee.addEventListener=function(t,e){var n=this._events[t],i=this._root;return e?(n||(n=this._events[t]=[],ie[t]||("selectionchange"===t&&(i=this._doc),i.addEventListener(t,this,!0))),n.push(e),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+t}),this)},ee.removeEventListener=function(t,e){var n,i=this._events[t],r=this._root;if(i){if(e)for(n=i.length;n--;)i[n]===e&&i.splice(n,1);else i.length=0;i.length||(delete this._events[t],ie[t]||("selectionchange"===t&&(r=this._doc),r.removeEventListener(t,this,!0)))}return this},ee.createRange=function(t,e,n,i){if(t instanceof this._win.Range)return t.cloneRange();var r=this._doc.createRange();return r.setStart(t,e),n?r.setEnd(n,i):r.setEnd(t,e),r},ee.getCursorPosition=function(t){if(!t&&!(t=this.getSelection())||!t.getBoundingClientRect)return null;var e,n,i=t.getBoundingClientRect();return i&&!i.top&&(this._ignoreChange=!0,(e=this._doc.createElement("SPAN")).textContent=H,gt(t,e),i=e.getBoundingClientRect(),(n=e.parentNode).removeChild(e),E(n,t)),i},ee._moveCursorTo=function(t){var e=this._root,n=this.createRange(e,t?0:e.childNodes.length);return kt(n),this.setSelection(n),this},ee.moveCursorToStart=function(){return this._moveCursorTo(!0)},ee.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var re=function(t){return t._win.getSelection()||null};ee.setSelection=function(t){if(t)if(this._lastSelection=t,this._isFocused)if(j&&!this._restoreSelection)A.call(this),this.blur(),this.focus();else{z&&this._win.focus();var e=re(this);e&&(e.removeAllRanges(),e.addRange(t))}else A.call(this);return this},ee.getSelection=function(){var t,e,n,i,s=re(this),o=this._root;return this._isFocused&&s&&s.rangeCount&&(e=(t=s.getRangeAt(0).cloneRange()).startContainer,n=t.endContainer,e&&r(e)&&t.setStartBefore(e),n&&r(n)&&t.setEndBefore(n)),t&&m(o,t.commonAncestorContainer)?this._lastSelection=t:m((i=(t=this._lastSelection).commonAncestorContainer).ownerDocument,i)||(t=null),t||(t=this.createRange(o.firstChild,0)),t},ee.getSelectedText=function(){var t=this.getSelection();if(!t||t.collapsed)return"";var e,n=new i(t.commonAncestorContainer,4|I,function(e){return wt(t,e,!0)}),r=t.startContainer,s=t.endContainer,a=n.currentNode=r,l="",c=!1;for(n.filter(a)||(a=n.nextNode());a;)a.nodeType===R?(e=a.data)&&/\S/.test(e)&&(a===s&&(e=e.slice(0,t.endOffset)),a===r&&(e=e.slice(t.startOffset)),l+=e,c=!0):("BR"===a.nodeName||c&&!o(a))&&(l+="\n",c=!1),a=n.nextNode();return l},ee.getPath=function(){return this._path};var se=function(t,e){for(var n,r,s,a=new i(t,4);r=a.nextNode();)for(;(s=r.data.indexOf(H))>-1&&(!e||r.parentNode!==e);){if(1===r.length){do{(n=r.parentNode).removeChild(r),r=n,a.currentNode=n}while(o(r)&&!_(r));break}r.deleteData(s,1)}};ee._didAddZWS=function(){this._hasZWS=!0},ee._removeZWS=function(){this._hasZWS&&(se(this._root),this._hasZWS=!1)},ee._updatePath=function(t,e){if(t){var n,i=t.startContainer,r=t.endContainer;(e||i!==this._lastAnchorNode||r!==this._lastFocusNode)&&(this._lastAnchorNode=i,this._lastFocusNode=r,n=i&&r?i===r?function t(e,n,i){var r,s,o,a,l,c="";return e&&e!==n&&(c=t(e.parentNode,n,i),e.nodeType===L&&(c+=(c?">":"")+e.nodeName,(r=e.id)&&(c+="#"+r),(s=e.className.trim())&&((o=s.split(/\s\s*/)).sort(),c+=".",c+=o.join(".")),(a=e.dir)&&(c+="[dir="+a+"]"),o&&(l=i.classNames,ot.call(o,l.highlight)>-1&&(c+="[backgroundColor="+e.style.backgroundColor.replace(/ /g,"")+"]"),ot.call(o,l.colour)>-1&&(c+="[color="+e.style.color.replace(/ /g,"")+"]"),ot.call(o,l.fontFamily)>-1&&(c+="[fontFamily="+e.style.fontFamily.replace(/ /g,"")+"]"),ot.call(o,l.fontSize)>-1&&(c+="[fontSize="+e.style.fontSize+"]")))),c}(r,this._root,this._config):"(selection)":"",this._path!==n&&(this._path=n,this.fireEvent("pathChange",{path:n}))),this.fireEvent(t.collapsed?"cursor":"select",{range:t})}},ee._updatePathOnEvent=function(t){var e=this;e._isFocused&&!e._willUpdatePath&&(e._willUpdatePath=!0,setTimeout(function(){e._willUpdatePath=!1,e._updatePath(e.getSelection())},0))},ee.focus=function(){if(Y){try{this._root.setActive()}catch(t){}this.fireEvent("focus")}else this._root.focus();return this},ee.blur=function(){return this._root.blur(),Y&&this.fireEvent("blur"),this};var oe="squire-selection-end";ee._saveRangeToBookmark=function(t){var e,n=this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),i=this.createElement("INPUT",{id:oe,type:"hidden"});gt(t,n),t.collapse(!1),gt(t,i),2&n.compareDocumentPosition(i)&&(n.id=oe,i.id="squire-selection-start",e=n,n=i,i=e),t.setStartAfter(n),t.setEndBefore(i)},ee._getRangeAndRemoveBookmark=function(t){var e=this._root,n=e.querySelector("#squire-selection-start"),i=e.querySelector("#"+oe);if(n&&i){var r=n.parentNode,s=i.parentNode,o=ot.call(r.childNodes,n),a=ot.call(s.childNodes,i);r===s&&(a-=1),v(n),v(i),t||(t=this._doc.createRange()),t.setStart(r,o),t.setEnd(s,a),E(r,t),r!==s&&E(s,t),t.collapsed&&((r=t.startContainer).nodeType===R&&((s=r.childNodes[t.startOffset])&&s.nodeType===R||(s=r.childNodes[t.startOffset-1]),s&&s.nodeType===R&&(t.setStart(s,0),t.collapse(!0))))}return t||null},ee._keyUpDetectChange=function(t){var e=t.keyCode;t.ctrlKey||t.metaKey||t.altKey||!(e<16||e>20)||!(e<33||e>45)||this._docWasChanged()},ee._docWasChanged=function(){if(rt&&(mt=new WeakMap),!this._ignoreAllChanges){if(it&&this._ignoreChange)return void(this._ignoreChange=!1);this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")}},ee._recordUndoState=function(t,e){if(!this._isInUndoState||e){var n,i=this._undoIndex,r=this._undoStack,s=this._config.undo,o=s.documentSizeThreshold,a=s.undoLimit;e||(i+=1),i<this._undoStackLength&&(r.length=this._undoStackLength=i),t&&this._saveRangeToBookmark(t),n=this._getHTML(),o>-1&&2*n.length>o&&a>-1&&i>a&&(r.splice(0,i-a),i=a,this._undoStackLength=a),r[i]=n,this._undoIndex=i,this._undoStackLength+=1,this._isInUndoState=!0}},ee.saveUndoState=function(t){return t===n&&(t=this.getSelection()),this._recordUndoState(t,this._isInUndoState),this._getRangeAndRemoveBookmark(t),this},ee.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection(),!1),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var t=this._getRangeAndRemoveBookmark();t&&this.setSelection(t),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},ee.redo=function(){var t=this._undoIndex,e=this._undoStackLength;if(t+1<e&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var n=this._getRangeAndRemoveBookmark();n&&this.setSelection(n),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:t+2<e}),this.fireEvent("input")}return this},ee.hasFormat=function(t,e,n){if(t=t.toUpperCase(),e||(e={}),!n&&!(n=this.getSelection()))return!1;!n.collapsed&&n.startContainer.nodeType===R&&n.startOffset===n.startContainer.length&&n.startContainer.nextSibling&&n.setStartBefore(n.startContainer.nextSibling),!n.collapsed&&n.endContainer.nodeType===R&&0===n.endOffset&&n.endContainer.previousSibling&&n.setEndAfter(n.endContainer.previousSibling);var r,s,o=this._root,a=n.commonAncestorContainer;if(p(a,o,t,e))return!0;if(a.nodeType===R)return!1;r=new i(a,4,function(t){return wt(n,t,!0)});for(var l=!1;s=r.nextNode();){if(!p(s,o,t,e))return!1;l=!0}return l},ee.getFontInfo=function(t){var e,i,r,s={color:n,backgroundColor:n,family:n,size:n},o=0;if(!t&&!(t=this.getSelection()))return s;if(e=t.commonAncestorContainer,t.collapsed||e.nodeType===R)for(e.nodeType===R&&(e=e.parentNode);o<4&&e;)(i=e.style)&&(!s.color&&(r=i.color)&&(s.color=r,o+=1),!s.backgroundColor&&(r=i.backgroundColor)&&(s.backgroundColor=r,o+=1),!s.family&&(r=i.fontFamily)&&(s.family=r,o+=1),!s.size&&(r=i.fontSize)&&(s.size=r,o+=1)),e=e.parentNode;return s},ee._addFormat=function(t,e,n){var r,s,a,l,c,d,u,f,h=this._root;if(n.collapsed){for(r=b(this.createElement(t,e),h),gt(n,r),n.setStart(r.firstChild,r.firstChild.length),n.collapse(!0),f=r;o(f);)f=f.parentNode;se(f,r)}else{if(s=new i(n.commonAncestorContainer,4|I,function(t){return(t.nodeType===R||"BR"===t.nodeName||"IMG"===t.nodeName)&&wt(n,t,!0)}),a=n.startContainer,c=n.startOffset,l=n.endContainer,d=n.endOffset,s.currentNode=a,s.filter(a)||(a=s.nextNode(),c=0),!a)return n;do{!p(u=s.currentNode,h,t,e)&&(u===l&&u.length>d&&u.splitText(d),u===a&&c&&(u=u.splitText(c),l===a&&(l=u,d-=c),a=u,c=0),g(u,r=this.createElement(t,e)),r.appendChild(u))}while(s.nextNode());l.nodeType!==R&&(u.nodeType===R?(l=u,d=u.length):(l=u.parentNode,d=1)),n=this.createRange(a,c,l,d)}return n},ee._removeFormat=function(t,e,n,i){this._saveRangeToBookmark(n);var r,s=this._doc;n.collapsed&&(et?(r=s.createTextNode(H),this._didAddZWS()):r=s.createTextNode(""),gt(n,r));for(var a=n.commonAncestorContainer;o(a);)a=a.parentNode;var l=n.startContainer,c=n.startOffset,d=n.endContainer,u=n.endOffset,f=[],p=function(t,e){if(!wt(n,t,!1)){var i,r,s=t.nodeType===R;if(!wt(n,t,!0))return void("INPUT"===t.nodeName||s&&!t.data||f.push([e,t]));if(s)t===d&&u!==t.length&&f.push([e,t.splitText(u)]),t===l&&c&&(t.splitText(c),f.push([e,t]));else for(i=t.firstChild;i;i=r)r=i.nextSibling,p(i,e)}},m=Array.prototype.filter.call(a.getElementsByTagName(t),function(i){return wt(n,i,!0)&&h(i,t,e)});return i||m.forEach(function(t){p(t,t)}),f.forEach(function(t){var e=t[0].cloneNode(!1),n=t[1];g(n,e),e.appendChild(n)}),m.forEach(function(t){g(t,C(t))}),this._getRangeAndRemoveBookmark(n),r&&n.collapse(!1),E(a,n),n},ee.changeFormat=function(t,e,n,i){return n||(n=this.getSelection())?(this.saveUndoState(n),e&&(n=this._removeFormat(e.tag.toUpperCase(),e.attributes||{},n,i)),t&&(n=this._addFormat(t.tag.toUpperCase(),t.attributes||{},n)),this.setSelection(n),this._updatePath(n,!0),it||this._docWasChanged(),this):this};var ae={DT:"DD",DD:"DT",LI:"LI",PRE:"PRE"},le=function(t,e,n,i){var r=ae[e.nodeName],s=null,o=k(n,i,e.parentNode,t._root),a=t._config;return r||(r=a.blockTag,s=a.blockAttributes),h(o,r,s)||(e=y(o.ownerDocument,r,s),o.dir&&(e.dir=o.dir),g(o,e),e.appendChild(C(o)),o=e),o};ee.forEachBlock=function(t,e,n){if(!n&&!(n=this.getSelection()))return this;e&&this.saveUndoState(n);var i=this._root,r=xt(n,i),s=St(n,i);if(r&&s)do{if(t(r)||r===s)break}while(r=u(r,i));return e&&(this.setSelection(n),this._updatePath(n,!0),it||this._docWasChanged()),this},ee.modifyBlocks=function(t,e){if(!e&&!(e=this.getSelection()))return this;this._recordUndoState(e,this._isInUndoState);var n,i=this._root;return Ft(e,i),Et(e,i,i,i),n=Ct(e,i,i),gt(e,t.call(this,n)),e.endOffset<e.endContainer.childNodes.length&&N(e.endContainer.childNodes[e.endOffset],i),N(e.startContainer.childNodes[e.startOffset],i),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),it||this._docWasChanged(),this};var ce=function(t){var e=this._root,n=t.querySelectorAll("blockquote");return Array.prototype.filter.call(n,function(t){return!p(t.parentNode,e,"BLOCKQUOTE")}).forEach(function(t){g(t,C(t))}),t},de=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),this.createElement("INPUT",{id:oe,type:"hidden"})])},ue=function(t,e,n){for(var i,r,s,o,a=c(e,t._root),l=t._config.tagAttributes,d=l[n.toLowerCase()],u=l.li;i=a.nextNode();)"LI"===i.parentNode.nodeName&&(i=i.parentNode,a.currentNode=i.lastChild),"LI"!==i.nodeName?(o=t.createElement("LI",u),i.dir&&(o.dir=i.dir),(s=i.previousSibling)&&s.nodeName===n?(s.appendChild(o),v(i)):g(i,t.createElement(n,d,[o])),o.appendChild(C(i)),a.currentNode=o):(r=(i=i.parentNode).nodeName)!==n&&/^[OU]L$/.test(r)&&g(i,t.createElement(n,d,[C(i)]))},fe=function(t,e){for(var n=t.commonAncestorContainer,i=t.startContainer,r=t.endContainer;n&&n!==e&&!/^[OU]L$/.test(n.nodeName);)n=n.parentNode;if(!n||n===e)return null;for(i===n&&(i=i.childNodes[t.startOffset]),r===n&&(r=r.childNodes[t.endOffset]);i&&i.parentNode!==n;)i=i.parentNode;for(;r&&r.parentNode!==n;)r=r.parentNode;return[n,i,r]};ee.increaseListLevel=function(t){if(!t&&!(t=this.getSelection()))return this.focus();var e=this._root,n=fe(t,e);if(!n)return this.focus();var i=n[0],r=n[1],s=n[2];if(!r||r===i.firstChild)return this.focus();this._recordUndoState(t,this._isInUndoState);var o,a,l=i.nodeName,c=r.previousSibling;c.nodeName!==l&&(o=this._config.tagAttributes[l.toLowerCase()],c=this.createElement(l,o),i.insertBefore(c,r));do{a=r===s?null:r.nextSibling,c.appendChild(r)}while(r=a);return(a=c.nextSibling)&&N(a,e),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),it||this._docWasChanged(),this.focus()},ee.decreaseListLevel=function(t){if(!t&&!(t=this.getSelection()))return this.focus();var e=this._root,n=fe(t,e);if(!n)return this.focus();var i=n[0],r=n[1],s=n[2];r||(r=i.firstChild),s||(s=i.lastChild),this._recordUndoState(t,this._isInUndoState);var o,a=i.parentNode,l=s.nextSibling?k(i,s.nextSibling,a,e):i.nextSibling;if(a!==e&&"LI"===a.nodeName){for(a=a.parentNode;l;)o=l.nextSibling,s.appendChild(l),l=o;l=i.parentNode.nextSibling}var c=!/^[OU]L$/.test(a.nodeName);do{o=r===s?null:r.nextSibling,i.removeChild(r),c&&"LI"===r.nodeName&&(r=this.createDefaultBlock([C(r)])),a.insertBefore(r,l)}while(r=o);return i.firstChild||v(i),l&&N(l,e),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),it||this._docWasChanged(),this.focus()},ee._ensureBottomLine=function(){var t=this._root,e=t.lastElementChild;e&&e.nodeName===this._config.blockTag&&a(e)||t.appendChild(this.createDefaultBlock())},ee.setKeyHandler=function(t,e){return this._keyHandlers[t]=e,this},ee._getHTML=function(){return this._root.innerHTML},ee._setHTML=function(t){var e=this._root,n=e;n.innerHTML=t;do{b(n,e)}while(n=u(n,e));this._ignoreChange=!0},ee.getHTML=function(t){var e,n,i,r,s,o,a=[];if(t&&(o=this.getSelection())&&this._saveRangeToBookmark(o),tt)for(n=e=this._root;n=u(n,e);)n.textContent||n.querySelector("BR")||(i=this.createElement("BR"),n.appendChild(i),a.push(i));if(r=this._getHTML().replace(/\u200B/g,""),tt)for(s=a.length;s--;)v(a[s]);return o&&this._getRangeAndRemoveBookmark(o),r},ee.setHTML=function(t){var e,n,i,r=this._config,s=r.isSetHTMLSanitized?r.sanitizeToDOMFragment:null,o=this._root;"function"==typeof s?n=s(t,!1,this):((e=this.createElement("DIV")).innerHTML=t,(n=this._doc.createDocumentFragment()).appendChild(C(e))),Kt(n,r),Zt(n,o,!1),w(n,o);for(var a=n;a=u(a,o);)b(a,o);for(this._ignoreChange=!0;i=o.lastChild;)o.removeChild(i);o.appendChild(n),b(o,o),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var l=this._getRangeAndRemoveBookmark()||this.createRange(o.firstChild,0);return this.saveUndoState(l),this._lastSelection=l,A.call(this),this._updatePath(l,!0),this},ee.insertElement=function(t,e){if(e||(e=this.getSelection()),e.collapse(!0),o(t))gt(e,t),e.setStartAfter(t);else{for(var n,i=this._root,r=xt(e,i)||i;r!==i&&!r.nextSibling;)r=r.parentNode;r!==i&&(n=k(r.parentNode,r.nextSibling,i,i)),n?i.insertBefore(t,n):(i.appendChild(t),n=this.createDefaultBlock(),i.appendChild(n)),e.setStart(n,0),e.setEnd(n,0),kt(e)}return this.focus(),this.setSelection(e),this._updatePath(e),it||this._docWasChanged(),this},ee.insertImage=function(t,e){var n=this.createElement("IMG",T({src:t},e,!0));return this.insertElement(n),n},ee.linkRegExp=/\b((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,}\/)(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))|([\w\-.%+]+@(?:[\w\-]+\.)+[A-Z]{2,}\b)(?:\?[^&?\s]+=[^&?\s]+(?:&[^&?\s]+=[^&?\s]+)*)?/i;var he=function(t,e,n){var r,s,o,a,l,c,d,u=t.ownerDocument,f=new i(t,4,function(t){return!p(t,e,"A")}),h=n.linkRegExp,m=n._config.tagAttributes.a;if(h)for(;r=f.nextNode();)for(s=r.data,o=r.parentNode;a=h.exec(s);)c=(l=a.index)+a[0].length,l&&(d=u.createTextNode(s.slice(0,l)),o.insertBefore(d,r)),(d=n.createElement("A",T({href:a[1]?/^(?:ht|f)tps?:/i.test(a[1])?a[1]:"http://"+a[1]:"mailto:"+a[0]},m,!1))).textContent=s.slice(l,c),o.insertBefore(d,r),r.data=s=s.slice(c)};ee.insertHTML=function(t,e){var n,i,r,s,o,a,l,c=this._config,d=c.isInsertedHTMLSanitized?c.sanitizeToDOMFragment:null,f=this.getSelection(),h=this._doc;"function"==typeof d?s=d(t,e,this):(e&&(n=t.indexOf("\x3c!--StartFragment--\x3e"),i=t.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&i>-1&&(t=t.slice(n+20,i))),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(t)&&(t="<TR>"+t+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(t)&&(t="<TABLE>"+t+"</TABLE>"),(r=this.createElement("DIV")).innerHTML=t,(s=h.createDocumentFragment()).appendChild(C(r))),this.saveUndoState(f);try{for(o=this._root,a=s,l={fragment:s,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},he(s,s,this),Kt(s,c),Zt(s,o,!1),Wt(s),s.normalize();a=u(a,s);)b(a,o);e&&this.fireEvent("willPaste",l),l.defaultPrevented||(bt(f,l.fragment,o),it||this._docWasChanged(),f.collapse(!1),this._ensureBottomLine()),this.setSelection(f),this._updatePath(f,!0),e&&this.focus()}catch(t){this.didError(t)}return this};var pe=function(t){return t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};ee.insertPlainText=function(t,e){var n=this.getSelection();if(n.collapsed&&p(n.startContainer,this._root,"PRE")){var i,r,s=n.startContainer,o=n.startOffset;return s&&s.nodeType===R||(i=this._doc.createTextNode(""),s.insertBefore(i,s.childNodes[o]),s=i,o=0),r={text:t,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},e&&this.fireEvent("willPaste",r),r.defaultPrevented||(t=r.text,s.insertData(o,t),n.setStart(s,o+t.length),n.collapse(!0)),this.setSelection(n),this}var a,l,c,d,u=t.split("\n"),f=this._config,h=f.blockTag,m=f.blockAttributes,_="</"+h+">",v="<"+h;for(a in m)v+=" "+a+'="'+pe(m[a])+'"';for(v+=">",l=0,c=u.length;l<c;l+=1)d=u[l],d=pe(d).replace(/ (?= )/g,"&nbsp;"),u[l]=v+(d||"<BR>")+_;return this.insertHTML(u.join(""),e)};var me=function(t,e,n){return function(){return this[t](e,n),this.focus()}};ee.addStyles=function(t){if(t){var e=this._doc.documentElement.firstChild,n=this.createElement("STYLE",{type:"text/css"});n.appendChild(this._doc.createTextNode(t)),e.appendChild(n)}return this},ee.bold=me("changeFormat",{tag:"B"}),ee.italic=me("changeFormat",{tag:"I"}),ee.underline=me("changeFormat",{tag:"U"}),ee.strikethrough=me("changeFormat",{tag:"S"}),ee.subscript=me("changeFormat",{tag:"SUB"},{tag:"SUP"}),ee.superscript=me("changeFormat",{tag:"SUP"},{tag:"SUB"}),ee.removeBold=me("changeFormat",null,{tag:"B"}),ee.removeItalic=me("changeFormat",null,{tag:"I"}),ee.removeUnderline=me("changeFormat",null,{tag:"U"}),ee.removeStrikethrough=me("changeFormat",null,{tag:"S"}),ee.removeSubscript=me("changeFormat",null,{tag:"SUB"}),ee.removeSuperscript=me("changeFormat",null,{tag:"SUP"}),ee.makeLink=function(t,e){var n=this.getSelection();if(n.collapsed){var i=t.indexOf(":")+1;if(i)for(;"/"===t[i];)i+=1;gt(n,this._doc.createTextNode(t.slice(i)))}return e=T(T({href:t},e,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:e},{tag:"A"},n),this.focus()},ee.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},ee.setFontFace=function(t){var e=this._config.classNames.fontFamily;return this.changeFormat(t?{tag:"SPAN",attributes:{class:e,style:"font-family: "+t+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:e}}),this.focus()},ee.setFontSize=function(t){var e=this._config.classNames.fontSize;return this.changeFormat(t?{tag:"SPAN",attributes:{class:e,style:"font-size: "+("number"==typeof t?t+"px":t)}}:null,{tag:"SPAN",attributes:{class:e}}),this.focus()},ee.setTextColour=function(t){var e=this._config.classNames.colour;return this.changeFormat(t?{tag:"SPAN",attributes:{class:e,style:"color:"+t}}:null,{tag:"SPAN",attributes:{class:e}}),this.focus()},ee.setHighlightColour=function(t){var e=this._config.classNames.highlight;return this.changeFormat(t?{tag:"SPAN",attributes:{class:e,style:"background-color:"+t}}:t,{tag:"SPAN",attributes:{class:e}}),this.focus()},ee.setTextAlignment=function(t){return this.forEachBlock(function(e){var n=e.className.split(/\s+/).filter(function(t){return!!t&&!/^align/.test(t)}).join(" ");t?(e.className=n+" align-"+t,e.style.textAlign=t):(e.className=n,e.style.textAlign="")},!0),this.focus()},ee.setTextDirection=function(t){return this.forEachBlock(function(e){t?e.dir=t:e.removeAttribute("dir")},!0),this.focus()};var _e=function(t){for(var e,n=this._root,r=this._doc,s=r.createDocumentFragment(),o=c(t,n);e=o.nextNode();){var a,l,d=e.querySelectorAll("BR"),u=[],f=d.length;for(a=0;a<f;a+=1)u[a]=Gt(d[a],!1);for(;f--;)l=d[f],u[f]?g(l,r.createTextNode("\n")):v(l);for(f=(d=e.querySelectorAll("CODE")).length;f--;)v(d[f]);s.childNodes.length&&s.appendChild(r.createTextNode("\n")),s.appendChild(C(e))}for(o=new i(s,4);e=o.nextNode();)e.data=e.data.replace(/ /g," ");return s.normalize(),b(this.createElement("PRE",this._config.tagAttributes.pre,[s]),n)},ve=function(t){for(var e,n,r,s,o,a,l=this._doc,c=this._root,d=t.querySelectorAll("PRE"),u=d.length;u--;){for(n=new i(e=d[u],4);r=n.nextNode();){for(s=(s=r.data).replace(/ (?= )/g," "),o=l.createDocumentFragment();(a=s.indexOf("\n"))>-1;)o.appendChild(l.createTextNode(s.slice(0,a))),o.appendChild(l.createElement("BR")),s=s.slice(a+1);r.parentNode.insertBefore(o,r),r.data=s}w(e,c),g(e,C(e))}return t};ee.code=function(){var t=this.getSelection();return t.collapsed||l(t.commonAncestorContainer)?this.modifyBlocks(_e,t):this.changeFormat({tag:"CODE",attributes:this._config.tagAttributes.code},null,t),this.focus()},ee.removeCode=function(){var t=this.getSelection();return p(t.commonAncestorContainer,this._root,"PRE")?this.modifyBlocks(ve,t):this.changeFormat(null,{tag:"CODE"},t),this.focus()},ee.toggleCode=function(){return this.hasFormat("PRE")||this.hasFormat("CODE")?this.removeCode():this.code(),this},ee.removeAllFormatting=function(t){if(!t&&!(t=this.getSelection())||t.collapsed)return this;for(var e=this._root,n=t.commonAncestorContainer;n&&!a(n);)n=n.parentNode;if(n||(Ft(t,e),n=e),n.nodeType===R)return this;this.saveUndoState(t),Et(t,n,n,e);for(var i,r,s=n.ownerDocument,o=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,u=s.createDocumentFragment(),f=s.createDocumentFragment(),h=k(c,d,n,e),p=k(o,l,n,e);p!==h;)i=p.nextSibling,u.appendChild(p),p=i;return P(this,u,f),f.normalize(),p=f.firstChild,i=f.lastChild,r=n.childNodes,p?(n.insertBefore(f,h),l=ot.call(r,p),d=ot.call(r,i)+1):d=l=ot.call(r,h),t.setStart(n,l),t.setEnd(n,d),E(n,t),kt(t),this.setSelection(t),this._updatePath(t,!0),this.focus()},ee.increaseQuoteLevel=me("modifyBlocks",function(t){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[t])}),ee.decreaseQuoteLevel=me("modifyBlocks",ce),ee.makeUnorderedList=me("modifyBlocks",function(t){return ue(this,t,"UL"),t}),ee.makeOrderedList=me("modifyBlocks",function(t){return ue(this,t,"OL"),t}),ee.removeList=me("modifyBlocks",function(t){var e,n,i,r,s,o=t.querySelectorAll("UL, OL"),l=t.querySelectorAll("LI"),c=this._root;for(e=0,n=o.length;e<n;e+=1)w(r=C(i=o[e]),c),g(i,r);for(e=0,n=l.length;e<n;e+=1)a(s=l[e])?g(s,this.createDefaultBlock([C(s)])):(w(s,c),g(s,C(s)));return t}),F.isInline=o,F.isBlock=a,F.isContainer=l,F.getBlockWalker=c,F.getPreviousBlock=d,F.getNextBlock=u,F.areAlike=f,F.hasTagAttributes=h,F.getNearest=p,F.isOrContains=m,F.detach=v,F.replaceWith=g,F.empty=C,F.getNodeBefore=_t,F.getNodeAfter=vt,F.insertNodeInRange=gt,F.extractContentsOfRange=Ct,F.deleteContentsOfRange=yt,F.insertTreeFragmentIntoRange=bt,F.isNodeContainedInRange=wt,F.moveRangeBoundariesDownTree=kt,F.moveRangeBoundariesUpTree=Et,F.getStartBlockOfRange=xt,F.getEndBlockOfRange=St,F.contentWalker=Nt,F.rangeDoesStartAtBlockBoundary=Dt,F.rangeDoesEndAtBlockBoundary=Tt,F.expandRangeToBlockBoundaries=Ft,F.onPaste=Jt,F.addLinks=he,F.splitBlock=le,F.startSelectionId="squire-selection-start",F.endSelectionId=oe,t.exports=F}(document)},ugYh:function(t,e,n){"use strict";n.r(e);var i=n("0fPN"),r=n("1IHE"),s={mixins:[i.a,r.a],props:{queryUrl:{type:String,required:!1},link:{type:Object,required:!1,default:function(){}}},data:function(){return{form:{url:null,title:null,content:null,is_private:!1,is_pinned:!1,tags:[]},parsing:!1,loading:!1,archiving:!1,archive:null}},mounted:function(){this.queryUrl&&(this.form.url=this.queryUrl),this.link&&(this.form=this.link)},methods:{parse:function(){var t=this;this.loading=!0,this.parsing=!0,axios.post("/api/link/parse",{url:this.form.url}).then(function(e){t.loading=!1,t.parsing=!1,200===e.status&&(t.form.title=e.data.title,t.form.content=e.data.content)}).catch(function(e){t.loading=!1,t.parsing=!1,t.setFormError(e),t.setHttpError(e),t.toastHttpError(t.__("Unable to parse link"))})},submit:function(){var t=this;this.loading=!0,axios.request({method:this.link?"PUT":"POST",url:this.link?this.link.url_update:"/api/link",data:this.form}).then(function(e){t.link?(t.$toasted.success(t.__("Link updated"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.loading=!1):(t.$toasted.success(t.__("Link created"),{action:{text:t.__("Show"),href:e.data.post.url}}),t.reset())}).catch(function(e){t.loading=!1,t.setFormError(e),t.setHttpError(e),t.toastHttpError(t.__("Unable to save link"))})},openArchive:function(){var t=this;axios.get(this.link.url_archive).then(function(e){t.archive=e.data,t.archiving=!0}).catch(function(e){t.setHttpError(e),t.toastHttpError(t.__("Whoops!"))})},askArchive:function(t){var e=this;axios.put(this.link.url_archive,{type:t}).then(function(t){e.$toasted.success(t.data.message),e.archiving=!1,e.archive=null}).catch(function(t){e.setHttpError(t),e.toastHttpError(e.__("Whoops!"))})},deleteArchive:function(){var t=this;axios.delete(this.link.url_archive).then(function(e){t.$toasted.success(e.data.message),t.archiving=!1,t.archive=null}).catch(function(e){t.setHttpError(e),t.toastHttpError(t.__("Whoops!"))})},reset:function(){this.loading=!1,this.parsing=!1,this.form={url:null,title:null,content:null,is_private:!1,is_pinned:!1,tags:[]},this.resetFormError()}},watch:{"form.url":_.debounce(function(t){t&&!this.link&&this.parse(t)},500)}},o=n("KHd+"),a=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--link"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"url"}},[t._v(t._s(t.__("URL")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.url,expression:"form.url"}],ref:"url",staticClass:"form-control",class:{"is-invalid":t.hasFormError("url")},attrs:{type:"text",id:"url",dusk:"link-form-url"},domProps:{value:t.form.url},on:{input:function(e){e.target.composing||t.$set(t.form,"url",e.target.value)}}}),t._v(" "),t.hasFormError("url")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("url")))]):t._e(),t._v(" "),t.parsing?n("small",{staticClass:"form-text text-muted",attrs:{dusk:"link-form-parsing-message"}},[t._v(t._s(t.__("Retrieving URL informations...")))]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v(t._s(t.__("Title")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("title")},attrs:{type:"text",id:"title",disabled:t.loading,dusk:"link-form-title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),t.hasFormError("title")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("title")))]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"content"}},[t._v(t._s(t.__("Content")))]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"form-control",class:{"is-invalid":t.hasFormError("content")},attrs:{id:"content",disabled:t.loading,dusk:"link-form-content"},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}}),t._v(" "),t.hasFormError("content")?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.firstFormError("content")))]):t._e()]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_private,expression:"form.is_private"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"is_private",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_private)?t._i(t.form.is_private,null)>-1:t.form.is_private},on:{change:function(e){var n=t.form.is_private,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_private",n.concat([null])):s>-1&&t.$set(t.form,"is_private",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_private",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_private",dusk:"link-form-private"}},[t._v(t._s(t.__("Private link?")))])])])]),t._v(" "),n("div",{staticClass:"col-12 col-md-6"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_pinned,expression:"form.is_pinned"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"is_pinned",disabled:t.loading},domProps:{checked:Array.isArray(t.form.is_pinned)?t._i(t.form.is_pinned,null)>-1:t.form.is_pinned},on:{change:function(e){var n=t.form.is_pinned,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.form,"is_pinned",n.concat([null])):s>-1&&t.$set(t.form,"is_pinned",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.form,"is_pinned",r)}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"is_pinned",dusk:"link-form-pinned"}},[t._v(t._s(t.__("Is pinned?")))])])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.__("Tags")))]),t._v(" "),n("tags",{attrs:{dusk:"link-form-tags"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)]),t._v(" "),n("div",{staticClass:"card-footer d-flex justify-content-between"},[n("div",[n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading,dusk:"link-form-save"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t.loading?n("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n                "+t._s(t.__("Save"))+"\n            ")]),t._v(" "),t.link?n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.openArchive}},[t._v(t._s(t.__("Archive")))]):t._e(),t._v(" "),t.link?n("a",{staticClass:"btn btn-outline-primary",attrs:{href:t.link.permalink}},[t._v(t._s(t.__("View")))]):t._e()]),t._v(" "),t._t("actions")],2),t._v(" "),n("modal",{attrs:{open:t.archiving,size:"lg"},on:{closed:function(e){t.archiving=!1}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.__("Archive")))]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6"},[n("h4",[t._v(t._s(t.__("Current archive")))]),t._v(" "),t.archive.download?n("p",[n("a",{staticClass:"btn btn-sm btn-primary text-white btn-block",attrs:{href:t.link.url_download}},[t._v(t._s(t.__("Download archive")))]),t._v(" "),n("confirm",{staticClass:"btn btn-sm btn-danger text-white btn-block",attrs:{text:t.__("Delete archive"),"text-confirm":t.__("Confirm")},on:{confirmed:t.deleteArchive}})],1):n("div",{staticClass:"alert alert-info"},[t._v("\n                        "+t._s(t.__("Archive does not exist"))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"col-12 col-md-6"},[n("h4",[t._v(t._s(t.__("New archive")))]),t._v(" "),t.archive.providers.length>0?n("p",[-1!==t.archive.providers.indexOf("media")?n("button",{staticClass:"btn btn-sm btn-primary btn-block",attrs:{name:"type"},on:{click:function(e){return t.askArchive("media")}}},[t._v(t._s(t.__("Archive as Media")))]):t._e(),t._v(" "),-1!==t.archive.providers.indexOf("pdf")?n("button",{staticClass:"btn btn-sm btn-primary btn-block",attrs:{name:"type"},on:{click:function(e){return t.askArchive("pdf")}}},[t._v(t._s(t.__("Archive as PDF")))]):t._e()]):n("div",{staticClass:"alert alert-info"},[t._v("\n                        "+t._s(t.__("No provider found to archive this link"))+"\n                    ")])])])]},proxy:!0}])})],1)},[],!1,null,null,null);e.default=a.exports},uuIC:function(t,e,n){"use strict";n.r(e);var i={props:{open:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1,default:"modal"},size:{type:String,required:!1,default:""}},methods:{createModal:function(){var t=this;this.$nextTick(function(){var e=$("#".concat(t.id));e.modal({keyboard:!1,show:!0}),e.on("hidden.bs.modal",function(e){t.deleteModal()}),t.$emit("opened")})},deleteModal:function(){$("#".concat(this.id)).modal("dispose"),$("div.modal-backdrop").remove(),$("body.modal-open").removeClass("modal-open"),this.$emit("closed")}},watch:{open:function(t){!0===t?this.createModal():this.deleteModal()}},computed:{hasHeader:function(){return this.$slots.hasOwnProperty("header")},hasFooter:function(){return this.$slots.hasOwnProperty("footer")}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.open?n("div",{staticClass:"modal fade",attrs:{id:t.id,role:"dialog"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered",class:{"modal-lg":"lg"===t.size,"modal-xl":"xl"===t.size,"modal-sm":"sm"===t.size},attrs:{role:"document"}},[n("div",{staticClass:"modal-content",class:{"border-0":!t.hasHeader&&!t.hasFooter}},[t.hasHeader?n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._t("header")],2),t._v(" "),t._m(0)]):t._e(),t._v(" "),n("div",{staticClass:"modal-body",class:{"p-0":!t.hasHeader&&!t.hasFooter}},[t._t("content")],2),t._v(" "),t.hasFooter?n("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()])])]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);e.default=s.exports},y8fO:function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},yDsy:function(t,e,n){"use strict";n.r(e);var i={props:{single:{type:Boolean,required:!1,default:!1},story:{type:Object,required:!0,default:function(){}}},methods:{remove:function(){var t=this;axios.delete(this.story.url_delete).then(function(e){t.$toasted.success(t.__("Story :name has been deleted",{name:t.story.title})),t.single?window.location="/":window.location.reload()}).catch(function(e){console.log(e),t.$toasted.error(t.__("Unable to delete story"))})}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card--story mb-4",class:{"card-single":t.single,"card-index":!t.single}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t.story.is_pinned&&!t.single?n("i",{staticClass:"fas fa-thumbtack fa-sm pr-1"}):t._e(),t._v(" "),n("span",[t._v(t._s(t.__("Story")))]),t._v(" — "),n("a",{attrs:{href:t.story.url}},[t._v(t._s(t.story.title))])]),t._v(" "),n("div",{staticClass:"card-content"},[n("viewer",{attrs:{value:t.story.content}})],1),t._v(" "),t.story.tags.length>0?n("p",{staticClass:"card-text mt-1"},t._l(t.story.tags,function(e){return n("a",{staticClass:"badge badge-secondary mr-1",attrs:{href:"/tag/"+e}},[t._v(t._s(e))])}),0):t._e()]),t._v(" "),n("div",{staticClass:"card-footer d-flex justify-content-between"},[n("span",[t.story.is_private?n("i",{staticClass:"fas fa-lock pr-2"}):t._e(),t._v(t._s(t.story.date_formated))]),t._v(" "),n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-outline-dark btn-sm dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                "+t._s(t.__("More"))+"\n            ")]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",attrs:{href:t.story.url}},[n("i",{staticClass:"fas fa-link fa-fw mr-1"}),t._v(" "+t._s(t.__("Permalink")))]),t._v(" "),t.story.editable?n("h6",{staticClass:"dropdown-header"},[t._v(t._s(t.__("Manage")))]):t._e(),t._v(" "),t.story.editable?n("a",{staticClass:"dropdown-item",on:{click:function(e){return t.$bus.$emit("share",t.story)}}},[n("i",{staticClass:"fas fa-share-square fa-fw mr-1"}),t._v(" "+t._s(t.__("Temp sharing")))]):t._e(),t._v(" "),t.story.editable?n("a",{staticClass:"dropdown-item",attrs:{href:t.story.url_edit}},[n("i",{staticClass:"fas fa-pen-alt fa-fw mr-1"}),t._v(" "+t._s(t.__("Edit")))]):t._e(),t._v(" "),t.story.editable?n("confirm",{staticClass:"dropdown-item",attrs:{text:"<i class='fas fa-trash-alt fa-fw mr-1'></i> "+t.__("Delete"),"text-confirm":"<i class='fas fa-check fa-fw mr-1'></i> "+t.__("Confirm")},on:{confirmed:t.remove}}):t._e()],1)])])])},[],!1,null,null,null);e.default=s.exports},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},zV0C:function(t,e,n){"use strict";n.r(e);var i={props:{url:{type:String,required:!0}},data:function(){return{name:"Shaare",width:600,height:390}},mounted:function(){},computed:{options:function(){return"menubar=no,height=".concat(this.height,",width=").concat(this.width,",toolbar=no,scrollbars=no,status=no,dialog=1")},script:function(){return"javascript:(function(){var url=location.href; window.open('".concat(this.url,"?url=' + encodeURIComponent(url), '_blank', '").concat(this.options,"');})();")}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(t.__("Rapid share")))]),t._v(" "),n("p",{staticClass:"card-text"},[t._v(t._s(t.__("Configure your rapid share button and drag it to your bookmarks menu.")))]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v(t._s(t.__("Name")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name",maxlength:"40"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"width"}},[t._v(t._s(t.__("Width")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"width"}],staticClass:"form-control",attrs:{type:"number",id:"width"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"height"}},[t._v(t._s(t.__("Height")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],staticClass:"form-control",attrs:{type:"number",id:"height"},domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.__("Share button")))]),n("br"),t._v(" "),n("a",{staticClass:"btn btn-outline-primary",attrs:{href:t.script},domProps:{textContent:t._s(t.name)}})])])])},[],!1,null,null,null);e.default=s.exports}},[[0,1,2]]]);